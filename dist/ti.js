var ti=function(t){var e={};function n(r){if(e[r])return e[r].exports;var u=e[r]={i:r,l:!1,exports:{}};return t[r].call(u.exports,u,u.exports,n),u.l=!0,u.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var u in t)n.d(r,u,function(e){return t[e]}.bind(null,u));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=3)}([function(t,e,n){"use strict";n.r(e),n.d(e,"ti",(function(){return r})),n.d(e,"lib",(function(){return u})),n.d(e,"SyntaxError",(function(){return o})),n.d(e,"NUMBER",(function(){return i})),n.d(e,"LIST",(function(){return a})),n.d(e,"STRING",(function(){return c})),n.d(e,"ANS",(function(){return l})),n.d(e,"GetKey",(function(){return s})),n.d(e,"VARIABLE",(function(){return f})),n.d(e,"STRINGVARIABLE",(function(){return p})),n.d(e,"LISTVARIABLE",(function(){return d})),n.d(e,"LISTINDEX",(function(){return m})),n.d(e,"BINARY",(function(){return v})),n.d(e,"UNARY",(function(){return h})),n.d(e,"EmptyStatement",(function(){return S})),n.d(e,"ValueStatement",(function(){return b})),n.d(e,"AssignmentStatement",(function(){return y})),n.d(e,"IfStatement",(function(){return g})),n.d(e,"ThenStatement",(function(){return E})),n.d(e,"ElseStatement",(function(){return L})),n.d(e,"ForLoop",(function(){return R})),n.d(e,"WhileLoop",(function(){return A})),n.d(e,"RepeatLoop",(function(){return I})),n.d(e,"EndStatement",(function(){return w})),n.d(e,"PauseStatement",(function(){return k})),n.d(e,"LabelStatement",(function(){return x})),n.d(e,"GotoStatement",(function(){return T})),n.d(e,"IncrementSkip",(function(){return N})),n.d(e,"DecrementSkip",(function(){return B})),n.d(e,"MenuStatement",(function(){return C})),n.d(e,"ProgramStatement",(function(){return G})),n.d(e,"ReturnStatement",(function(){return M})),n.d(e,"StopStatement",(function(){return D})),n.d(e,"DelVarStatement",(function(){return V})),n.d(e,"GraphStyleStatement",(function(){return U})),n.d(e,"OpenLibStatement",(function(){return P})),n.d(e,"ExecLibStatement",(function(){return O})),n.d(e,"Input",(function(){return F})),n.d(e,"Prompt",(function(){return H})),n.d(e,"Display",(function(){return Y})),n.d(e,"DispGraph",(function(){return j})),n.d(e,"DispTable",(function(){return W})),n.d(e,"Output",(function(){return $})),n.d(e,"ClrHome",(function(){return K})),n.d(e,"ClrTable",(function(){return X})),n.d(e,"GetCalc",(function(){return _})),n.d(e,"Get",(function(){return q})),n.d(e,"Send",(function(){return Q}));const r="ti",u="lib",o="SyntaxError",i="number",a="list",c="string",l="ans",s="GetKey",f="variable",p="stringVariable",d="listVariable",m="listIndex",v="binary",h="unary",S="empty",b="value",y="assign",g="IfStatement",E="ThenStatement",L="ElseStatement",R="ForLoop",A="WhileLoop",I="RepeatLoop",w="EndStatement",k="PauseStatement",x="LabelStatement",T="GotoStatement",N="IncrementSkip",B="DecrementSkip",C="MenuStatement",G="ProgramStatement",M="ReturnStatement",D="StopStatement",V="DelVarStatement",U="GraphStyleStatement",P="OpenLibStatement",O="ExecLibStatement",F="Input",H="Prompt",Y="display",j="DispGraph",W="DispTable",$="Output",K="ClrHome",X="ClrTable",_="GetCalc",q="Get",Q="Send"},function(t,e,n){"use strict";function r(t,e,n,u){this.message=t,this.expected=e,this.found=n,this.location=u,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,r)}!function(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}(r,Error),r.buildMessage=function(t,e){var n={literal:function(t){return'"'+u(t.text)+'"'},class:function(t){var e=t.parts.map((function(t){return Array.isArray(t)?o(t[0])+"-"+o(t[1]):o(t)}));return"["+(t.inverted?"^":"")+e+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(t){return t.description},not:function(t){return"not "+i(t.expected)}};function r(t){return t.charCodeAt(0).toString(16).toUpperCase()}function u(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+r(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+r(t)}))}function o(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+r(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+r(t)}))}function i(t){return n[t.type](t)}return"Expected "+function(t){var e,n,r=t.map(i);if(r.sort(),r.length>0){for(e=1,n=1;e<r.length;e++)r[e-1]!==r[e]&&(r[n]=r[e],n++);r.length=n}switch(r.length){case 1:return r[0];case 2:return r[0]+" or "+r[1];default:return r.slice(0,-1).join(", ")+", or "+r[r.length-1]}}(t)+" but "+function(t){return t?'"'+u(t)+'"':"end of input"}(e)+" found."},t.exports={SyntaxError:r,parse:function(t,e){e=void 0!==e?e:{};var u,o={},i={Start:Wt},a=Wt,c=/^[A-Z]/,l=/^[A-Z0-9]/,s=/^[0-9]/,f=/^[1-6]/,p=/^[+\-]/,d=/^[^"]/,m={type:"any"},v=Ut([["A","Z"]],!1,!1),h=Ut([["A","Z"],["0","9"]],!1,!1),S=Ut([["0","9"]],!1,!1),b=Vt(")",!1),y=Vt("&theta",!1),g=Vt("Str",!1),E=Vt("&L",!1),L=Ut([["1","6"]],!1,!1),R=Vt("&list",!1),A=Vt("(",!1),I=Ut(["+","-"],!1,!1),w=Vt("&E",!1),k=Vt(".",!1),x=Ut(['"'],!0,!1),T=Vt('"',!1),N=Vt("Ans",!1),B=Vt("getKey",!1),C=Vt("{",!1),G=Vt("}",!1),M=Vt("&-",!1),D=Vt("*",!1),V=Vt("/",!1),U=Vt("+",!1),P=Vt("-",!1),O=Vt("=",!1),F=Vt("!=",!1),H=Vt(">=",!1),Y=Vt(">",!1),j=Vt("<=",!1),W=Vt("<",!1),$=Vt(" and ",!1),K=Vt(" or ",!1),X=Vt(" xor ",!1),_=Vt(",",!1),q=Vt("->",!1),Q=Vt("If ",!1),Z=Vt("Then",!1),z=Vt("Else",!1),J=Vt("For(",!1),tt=Vt("While ",!1),et=Vt("Repeat ",!1),nt=Vt("End",!1),rt=Vt("Pause",!1),ut=Vt("Lbl ",!1),ot=Vt("Goto ",!1),it=Vt("IS>(",!1),at=Vt("DS<(",!1),ct=Vt("Menu(",!1),lt=Vt("prgm",!1),st=Vt("Return",!1),ft=Vt("Stop",!1),pt=Vt("DelVar ",!1),dt=Vt("GraphStyle(",!1),mt=Vt("OpenLib(",!1),vt=Vt("ExecLib(",!1),ht=Vt("Input ",!1),St=Vt("Prompt ",!1),bt=Vt("Disp ",!1),yt=Vt("DispGraph",!1),gt=Vt("DispTable",!1),Et=Vt("Output(",!1),Lt=Vt("ClrHome",!1),Rt=Vt("ClrTable",!1),At=Vt("GetCalc(",!1),It=Vt("Get(",!1),wt=Vt("Send(",!1),kt=function(){return Dt()},xt=function(t,e){return{type:xe.UNARY,operator:t,argument:e}},Tt=function(t,e,n){return Te.buildImplicitBinaryExpression(t,e,n)},Nt=function(t,e){return Te.buildBinaryExpression(t,e)},Bt=0,Ct=0,Gt=[{line:1,column:1}],Mt=[];if("startRule"in e){if(!(e.startRule in i))throw new Error("Can't start parsing from rule \""+e.startRule+'".');a=i[e.startRule]}function Dt(){return t.substring(Ct,Bt)}function Vt(t,e){return{type:"literal",text:t,ignoreCase:e}}function Ut(t,e,n){return{type:"class",parts:t,inverted:e,ignoreCase:n}}function Pt(e){var n,r=Gt[e];if(r)return r;for(n=e-1;!Gt[n];)n--;for(r={line:(r=Gt[n]).line,column:r.column};n<e;)10===t.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return Gt[e]=r,r}var Ot="string"==typeof e.filename&&e.filename.length>0;function Ft(t,n){var r={};Ot&&(r.filename=e.filename);var u=Pt(t);r.start={offset:t,line:u.line,column:u.column};var o=Pt(n);return r.end={offset:n,line:o.line,column:o.column},r}function Ht(){Mt.push({pos:Bt,variants:[]})}function Yt(t){var e=Mt[Mt.length-1];Bt<e.pos||(Bt>e.pos&&(e.pos=Bt,e.variants=[]),e.variants.push(t))}function jt(t,e,n){return new r(r.buildMessage(t,e),t,e,n)}function Wt(){return function(){var e;(e=function(){var t,e,n;t=Bt,e=Bt,Ht(),n=$t(),function(t){var e=Mt.pop(),n=Mt[Mt.length-1],r=e.variants;n.pos===e.pos&&(t&&(r=r.map((function(t){return"not"===t.type?t.expected:{type:"not",expected:t}}))),Array.prototype.push.apply(n.variants,r))}(!0),n===o?e=void 0:(Bt=e,e=o);e!==o&&(Ct=t,e={type:xe.EmptyStatement});return t=e}())===o&&(e=function(){var e,n,r,u;e=Bt,(n=we())!==o?(!function(t){Yt(t)}(q),"->"===t.substr(Bt,2)?(r="->",Bt+=2):r=o,r!==o&&(u=oe())!==o?(Ct=e,i=n,a=u,e={type:xe.AssignmentStatement,value:i,assignable:a}):(Bt=e,e=o)):(Bt=e,e=o);var i,a;return e}())===o&&(e=function(){var e;(e=function(){var e,n,r,u;e=Bt,function(t){Yt(t)}(Q),"If "===t.substr(Bt,3)?(n="If ",Bt+=3):n=o;n!==o?((r=we())===o&&(r=null),(u=qt())===o&&(u=null),Ct=e,i=r,a=u,e={type:xe.IfStatement,value:i,extra:a}):(Bt=e,e=o);var i,a;return e}())===o&&(e=function(){var e,n,r;e=Bt,function(t){Yt(t)}(Z),"Then"===t.substr(Bt,4)?(n="Then",Bt+=4):n=o;n!==o?((r=qt())===o&&(r=null),Ct=e,u=r,e={type:xe.ThenStatement,extra:u}):(Bt=e,e=o);var u;return e}())===o&&(e=function(){var e,n,r;e=Bt,function(t){Yt(t)}(z),"Else"===t.substr(Bt,4)?(n="Else",Bt+=4):n=o;n!==o?((r=qt())===o&&(r=null),Ct=e,u=r,e={type:xe.ElseStatement,extra:u}):(Bt=e,e=o);var u;return e}())===o&&(e=function(){var e,n,r,u,i,a,c,l;e=Bt,function(t){Yt(t)}(J),"For("===t.substr(Bt,4)?(n="For(",Bt+=4):n=o;n!==o?((r=re())===o&&(r=null),(u=ke())===o&&(u=null),(i=ke())===o&&(i=null),(a=ke())===o&&(a=null),(c=function(){var t,e,n;if(t=Bt,e=[],(n=ke())!==o)for(;n!==o;)e.push(n),n=ke();else e=o;e!==o&&(Ct=t,e=!0);return t=e}())===o&&(c=null),Qt(),(l=qt())===o&&(l=null),Ct=e,s=r,f=u,p=i,d=a,m=c,v=l,e={type:xe.ForLoop,variable:s,start:f,end:p,step:d,args:m,extra:v}):(Bt=e,e=o);var s,f,p,d,m,v;return e}())===o&&(e=function(){var e,n,r,u;e=Bt,function(t){Yt(t)}(tt),"While "===t.substr(Bt,6)?(n="While ",Bt+=6):n=o;n!==o?((r=we())===o&&(r=null),(u=qt())===o&&(u=null),Ct=e,i=r,a=u,e={type:xe.WhileLoop,value:i,extra:a}):(Bt=e,e=o);var i,a;return e}())===o&&(e=function(){var e,n,r,u;e=Bt,function(t){Yt(t)}(et),"Repeat "===t.substr(Bt,7)?(n="Repeat ",Bt+=7):n=o;n!==o?((r=we())===o&&(r=null),(u=qt())===o&&(u=null),Ct=e,i=r,a=u,e={type:xe.RepeatLoop,value:i,extra:a}):(Bt=e,e=o);var i,a;return e}())===o&&(e=function(){var e,n,r;e=Bt,function(t){Yt(t)}(nt),"End"===t.substr(Bt,3)?(n="End",Bt+=3):n=o;n!==o?((r=qt())===o&&(r=null),Ct=e,u=r,e={type:xe.EndStatement,extra:u}):(Bt=e,e=o);var u;return e}())===o&&(e=function(){var e,n;e=Bt,function(t){Yt(t)}(rt),"Pause"===t.substr(Bt,5)?(n="Pause",Bt+=5):n=o;n!==o&&(Ct=e,n={type:xe.PauseStatement});return e=n}())===o&&(e=function(){var e,n,r;e=Bt,function(t){Yt(t)}(ut),"Lbl "===t.substr(Bt,4)?(n="Lbl ",Bt+=4):n=o;n!==o&&(r=Zt())!==o?(Ct=e,e=function(t){return{type:xe.LabelStatement,location:t}}(r)):(Bt=e,e=o);return e}())===o&&(e=function(){var e,n,r;e=Bt,function(t){Yt(t)}(ot),"Goto "===t.substr(Bt,5)?(n="Goto ",Bt+=5):n=o;n!==o&&(r=Zt())!==o?(Ct=e,e=function(t){return{type:xe.GotoStatement,location:t}}(r)):(Bt=e,e=o);return e}())===o&&(e=function(){var e,n,r,u;e=Bt,function(t){Yt(t)}(it),"IS>("===t.substr(Bt,4)?(n="IS>(",Bt+=4):n=o;n!==o?((r=re())===o&&(r=null),(u=ke())===o&&(u=null),Qt(),Ct=e,i=r,a=u,e={type:xe.IncrementSkip,variable:i,end:a}):(Bt=e,e=o);var i,a;return e}())===o&&(e=function(){var e,n,r,u;e=Bt,function(t){Yt(t)}(at),"DS<("===t.substr(Bt,4)?(n="DS<(",Bt+=4):n=o;n!==o?((r=re())===o&&(r=null),(u=ke())===o&&(u=null),Qt(),Ct=e,i=r,a=u,e={type:xe.DecrementSkip,variable:i,end:a}):(Bt=e,e=o);var i,a;return e}())===o&&(e=function(){var e,n,r,u,i,a,c,l,s,f=function(t){Yt(t)};e=Bt,f(ct),"Menu("===t.substr(Bt,5)?(n="Menu(",Bt+=5):n=o;if(n!==o){for((r=we())===o&&(r=null),u=[],i=Bt,f(_),44===t.charCodeAt(Bt)?(a=",",Bt++):a=o,a!==o&&(c=se())!==o?(f(_),44===t.charCodeAt(Bt)?(l=",",Bt++):l=o,l!==o&&(s=Zt())!==o?i=a=[a,c,l,s]:(Bt=i,i=o)):(Bt=i,i=o);i!==o;)u.push(i),i=Bt,f(_),44===t.charCodeAt(Bt)?(a=",",Bt++):a=o,a!==o&&(c=se())!==o?(f(_),44===t.charCodeAt(Bt)?(l=",",Bt++):l=o,l!==o&&(s=Zt())!==o?i=a=[a,c,l,s]:(Bt=i,i=o)):(Bt=i,i=o);i=Qt(),Ct=e,e=function(t,e){return Te.buildMenuStatement(t,e)}(r,u)}else Bt=e,e=o;return e}())===o&&(e=function(){var e,n,r;e=Bt,function(t){Yt(t)}(lt),"prgm"===t.substr(Bt,4)?(n="prgm",Bt+=4):n=o;n!==o&&(r=zt())!==o?(Ct=e,u=r,e={type:xe.ProgramStatement,name:u}):(Bt=e,e=o);var u;return e}())===o&&(e=function(){var e,n;e=Bt,function(t){Yt(t)}(st),"Return"===t.substr(Bt,6)?(n="Return",Bt+=6):n=o;n!==o&&(Ct=e,n={type:xe.ReturnStatement});return e=n}())===o&&(e=function(){var e,n;e=Bt,function(t){Yt(t)}(ft),"Stop"===t.substr(Bt,4)?(n="Stop",Bt+=4):n=o;n!==o&&(Ct=e,n={type:xe.StopStatement});return e=n}())===o&&(e=function(){var e,n,r;e=Bt,function(t){Yt(t)}(pt),"DelVar "===t.substr(Bt,7)?(n="DelVar ",Bt+=7):n=o;n!==o?((r=re())===o&&(r=null),Ct=e,u=r,e={type:xe.DelVarStatement,variable:u}):(Bt=e,e=o);var u;return e}())===o&&(e=function(){var e,n,r,u;e=Bt,function(t){Yt(t)}(dt),"GraphStyle("===t.substr(Bt,11)?(n="GraphStyle(",Bt+=11):n=o;n!==o?((r=we())===o&&(r=null),(u=ke())===o&&(u=null),Qt(),Ct=e,i=r,a=u,e={type:xe.GraphStyleStatement,equation:i,style:a}):(Bt=e,e=o);var i,a;return e}())===o&&(e=function(){var e,n,r;e=Bt,function(t){Yt(t)}(mt),"OpenLib("===t.substr(Bt,8)?(n="OpenLib(",Bt+=8):n=o;n!==o&&(r=zt())!==o?(Qt(),Ct=e,u=r,e={type:xe.OpenLibStatement,name:u}):(Bt=e,e=o);var u;return e}())===o&&(e=function(){var e,n,r;e=Bt,function(t){Yt(t)}(vt),"ExecLib("===t.substr(Bt,8)?(n="ExecLib(",Bt+=8):n=o;n!==o&&(r=zt())!==o?(Qt(),Ct=e,u=r,e={type:xe.ExecLibStatement,name:u}):(Bt=e,e=o);var u;return e}());return e}())===o&&(e=function(){var e;(e=function(){var e,n,r,u;e=Bt,function(t){Yt(t)}(ht),"Input "===t.substr(Bt,6)?(n="Input ",Bt+=6):n=o;n!==o?((r=function(){var e,n,r;e=Bt,(n=we())!==o?(!function(t){Yt(t)}(_),44===t.charCodeAt(Bt)?(r=",",Bt++):r=o,r!==o?e=n:(Bt=e,e=o)):(Bt=e,e=o);return e}())===o&&(r=null),(u=re())===o&&(u=null),Ct=e,e=function(t,e){return{type:xe.Input,text:t,variable:e}}(r,u)):(Bt=e,e=o);return e}())===o&&(e=function(){var e,n,r;e=Bt,function(t){Yt(t)}(St),"Prompt "===t.substr(Bt,7)?(n="Prompt ",Bt+=7):n=o;n!==o?((r=re())===o&&(r=null),Ct=e,u=r,e={type:xe.Prompt,variable:u}):(Bt=e,e=o);var u;return e}())===o&&(e=function(){var e,n,r;e=Bt,function(t){Yt(t)}(bt),"Disp "===t.substr(Bt,5)?(n="Disp ",Bt+=5):n=o;n!==o?((r=we())===o&&(r=null),Ct=e,u=r,e={type:xe.Display,value:u}):(Bt=e,e=o);var u;return e}())===o&&(e=function(){var e,n;e=Bt,function(t){Yt(t)}(yt),"DispGraph"===t.substr(Bt,9)?(n="DispGraph",Bt+=9):n=o;n!==o&&(Ct=e,n={type:xe.DispGraph});return e=n}())===o&&(e=function(){var e,n;e=Bt,function(t){Yt(t)}(gt),"DispTable"===t.substr(Bt,9)?(n="DispTable",Bt+=9):n=o;n!==o&&(Ct=e,n={type:xe.DispTable});return e=n}())===o&&(e=function(){var e,n,r,u,i;e=Bt,function(t){Yt(t)}(Et),"Output("===t.substr(Bt,7)?(n="Output(",Bt+=7):n=o;n!==o?((r=we())===o&&(r=null),(u=ke())===o&&(u=null),(i=ke())===o&&(i=null),Qt(),Ct=e,a=r,c=u,l=i,e={type:xe.Output,row:a,column:c,value:l}):(Bt=e,e=o);var a,c,l;return e}())===o&&(e=function(){var e,n;e=Bt,function(t){Yt(t)}(Lt),"ClrHome"===t.substr(Bt,7)?(n="ClrHome",Bt+=7):n=o;n!==o&&(Ct=e,n={type:xe.ClrHome});return e=n}())===o&&(e=function(){var e,n;e=Bt,function(t){Yt(t)}(Rt),"ClrTable"===t.substr(Bt,8)?(n="ClrTable",Bt+=8):n=o;n!==o&&(Ct=e,n={type:xe.ClrTable});return e=n}())===o&&(e=function(){var e,n,r,u;e=Bt,function(t){Yt(t)}(At),"GetCalc("===t.substr(Bt,8)?(n="GetCalc(",Bt+=8):n=o;n!==o?((r=re())===o&&(r=null),(u=ke())===o&&(u=null),Qt(),Ct=e,i=r,a=u,e={type:xe.GetCalc,variable:i,portflag:a}):(Bt=e,e=o);var i,a;return e}())===o&&(e=function(){var e,n,r;e=Bt,function(t){Yt(t)}(It),"Get("===t.substr(Bt,4)?(n="Get(",Bt+=4):n=o;n!==o?((r=re())===o&&(r=null),Qt(),Ct=e,u=r,e={type:xe.Get,variable:u}):(Bt=e,e=o);var u;return e}())===o&&(e=function(){var e,n,r;e=Bt,function(t){Yt(t)}(wt),"Send("===t.substr(Bt,5)?(n="Send(",Bt+=5):n=o;n!==o?((r=re())===o&&(r=null),Qt(),Ct=e,u=r,e={type:xe.Send,variable:u}):(Bt=e,e=o);var u;return e}());return e}())===o&&(e=function(){var t,e;t=Bt,(e=we())!==o&&(Ct=t,n=e,e={type:xe.ValueStatement,value:n});var n;return t=e}());return e}()}function $t(){var e;return function(t){Yt(t)}(m),t.length>Bt?(e=t.charAt(Bt),Bt++):e=o,e}function Kt(){var e;return function(t){Yt(t)}(v),c.test(t.charAt(Bt))?(e=t.charAt(Bt),Bt++):e=o,e}function Xt(){var e;return function(t){Yt(t)}(h),l.test(t.charAt(Bt))?(e=t.charAt(Bt),Bt++):e=o,e}function _t(){var e;return function(t){Yt(t)}(S),s.test(t.charAt(Bt))?(e=t.charAt(Bt),Bt++):e=o,e}function qt(){var t,e,n;if(t=Bt,e=[],(n=$t())!==o)for(;n!==o;)e.push(n),n=$t();else e=o;return e!==o&&(Ct=t,e=!0),t=e}function Qt(){var e;return function(t){Yt(t)}(b),41===t.charCodeAt(Bt)?(e=")",Bt++):e=o,e===o&&(e=null),e}function Zt(){var t;return t=Bt,Xt()!==o?(Xt()===o&&null,Ct=t,t=kt()):(Bt=t,t=o),t}function zt(){var t;return t=Bt,Kt()!==o?(Xt()===o&&null,Xt()===o&&null,Xt()===o&&null,Xt()===o&&null,Xt()===o&&null,Xt()===o&&null,Xt()===o&&null,Ct=t,t=kt()):(Bt=t,t=o),t}function Jt(){var e,n;return e=Bt,function(t){Yt(t)}(R),"&list"===t.substr(Bt,5)?(n="&list",Bt+=5):n=o,n!==o&&Kt()!==o?(Xt()===o&&null,Xt()===o&&null,Xt()===o&&null,Xt()===o&&null,Ct=e,e="List"+Dt().substring(5)):(Bt=e,e=o),e}function te(){var e,n,r;return e=Bt,(n=function(){var e,n;return(e=Kt())===o&&(e=Bt,function(t){Yt(t)}(y),"&theta"===t.substr(Bt,6)?(n="&theta",Bt+=6):n=o,n!==o&&(Ct=e,n="THETA"),e=n),e}())!==o&&(Ct=e,r=n,n={type:xe.VARIABLE,name:r}),e=n}function ee(){var e,n,r;return e=Bt,(n=function(){var e,n;return e=Bt,function(t){Yt(t)}(g),"Str"===t.substr(Bt,3)?(n="Str",Bt+=3):n=o,n!==o&&_t()!==o?(Ct=e,e=kt()):(Bt=e,e=o),e}())!==o&&(Ct=e,r=n,n={type:xe.STRINGVARIABLE,name:r}),e=n}function ne(){var e,n,r;return e=Bt,(n=function(){var e,n,r,u=function(t){Yt(t)};return e=Bt,u(E),"&L"===t.substr(Bt,2)?(n="&L",Bt+=2):n=o,n!==o?(u(L),f.test(t.charAt(Bt))?(r=t.charAt(Bt),Bt++):r=o,r!==o?(Ct=e,e="List"+r):(Bt=e,e=o)):(Bt=e,e=o),e}())!==o&&(Ct=e,r=n,n={type:xe.LISTVARIABLE,name:r,custom:!1}),(e=n)===o&&(e=Bt,(n=Jt())!==o&&(Ct=e,n=function(t){return{type:xe.LISTVARIABLE,name:t,custom:!0}}(n)),e=n),e}function re(){var t;return(t=ee())===o&&(t=te())===o&&(t=ne()),t}function ue(){var e,n,r,u,i,a;return e=Bt,(n=ne())!==o?(!function(t){Yt(t)}(A),40===t.charCodeAt(Bt)?(r="(",Bt++):r=o,r!==o&&(u=we())!==o?(Qt(),Ct=e,i=n,a=u,e={type:xe.LISTINDEX,list:i,index:a}):(Bt=e,e=o)):(Bt=e,e=o),e}function oe(){var t;return(t=ue())===o&&(t=re()),t}function ie(){var e,n,r;if(e=Bt,n=[],(r=_t())!==o)for(;r!==o;)n.push(r),r=_t();else n=o;return e=n!==o?t.substring(e,Bt):n}function ae(){var e,n,r;return e=Bt,function(){var e;return function(t){Yt(t)}(w),"&E"===t.substr(Bt,2)?(e="&E",Bt+=2):e=o,e}()!==o?(n=Bt,r=function(){var e,n,r,u;return e=Bt,n=Bt,function(t){Yt(t)}(I),p.test(t.charAt(Bt))?(r=t.charAt(Bt),Bt++):r=o,r===o&&(r=null),(u=ie())!==o?n=r=[r,u]:(Bt=n,n=o),e=n!==o?t.substring(e,Bt):n}(),(n=r!==o?t.substring(n,Bt):r)!==o?e=n:(Bt=e,e=o)):(Bt=e,e=o),e}function ce(){var e,n,r,u,i,a,c,l,s=function(t){Yt(t)};return e=Bt,(n=ie())!==o?(s(k),46===t.charCodeAt(Bt)?(r=".",Bt++):r=o,r!==o?((u=ie())===o&&(u=null),(i=ae())===o&&(i=null),Ct=e,a=n,c=u,l=i,e={type:xe.NUMBER,integer:a,fraction:c,exponent:l}):(Bt=e,e=o)):(Bt=e,e=o),e===o&&(e=Bt,s(k),46===t.charCodeAt(Bt)?(n=".",Bt++):n=o,n!==o&&(r=ie())!==o?((u=ae())===o&&(u=null),Ct=e,e=function(t,e){return{type:xe.NUMBER,fraction:t,exponent:e}}(r,u)):(Bt=e,e=o),e===o&&(e=Bt,(n=ie())!==o?((r=ae())===o&&(r=null),Ct=e,e=function(t,e){return{type:xe.NUMBER,integer:t,exponent:e}}(n,r)):(Bt=e,e=o))),e}function le(){var e;return function(t){Yt(t)}(x),d.test(t.charAt(Bt))?(e=t.charAt(Bt),Bt++):e=o,e}function se(){var e,n,r,u,i,a=function(t){Yt(t)};return e=Bt,a(T),34===t.charCodeAt(Bt)?(n='"',Bt++):n=o,n!==o?(r=function(){var e,n,r;for(e=Bt,n=[],r=le();r!==o;)n.push(r),r=le();return e=t.substring(e,Bt)}(),a(T),34===t.charCodeAt(Bt)?(u='"',Bt++):u=o,u===o&&(u=null),Ct=e,i=r,e={type:xe.STRING,chars:i}):(Bt=e,e=o),e}function fe(){var e,n;return e=Bt,function(t){Yt(t)}(N),"Ans"===t.substr(Bt,3)?(n="Ans",Bt+=3):n=o,n!==o&&(Ct=e,n={type:xe.ANS}),e=n}function pe(){var e,n;return e=Bt,function(t){Yt(t)}(B),"getKey"===t.substr(Bt,6)?(n="getKey",Bt+=6):n=o,n!==o&&(Ct=e,n={type:xe.GetKey}),e=n}function de(){var t;return(t=function(){var t;return(t=fe())===o&&(t=pe()),t}())===o&&(t=oe())===o&&(t=se()),t}function me(){var e,n,r,u,i,a,c,l=function(t){Yt(t)};if(e=Bt,l(C),123===t.charCodeAt(Bt)?(n="{",Bt++):n=o,n!==o)if((r=we())!==o){for(u=[],i=ke();i!==o;)u.push(i),i=ke();l(G),125===t.charCodeAt(Bt)?(i="}",Bt++):i=o,i===o&&(i=null),Ct=e,a=r,c=u,e=Te.buildList(a,c)}else Bt=e,e=o;else Bt=e,e=o;return e}function ve(){var e;return function(t){Yt(t)}(M),"&-"===t.substr(Bt,2)?(e="&-",Bt+=2):e=o,e}function he(){var e,n,r;return(e=function(){var e,n,r,u,i=function(t){Yt(t)};return(e=de())===o&&(e=Bt,i(A),40===t.charCodeAt(Bt)?(n="(",Bt++):n=o,n!==o&&(r=we())!==o?(i(b),41===t.charCodeAt(Bt)?(u=")",Bt++):u=o,u!==o?e=r:(Bt=e,e=o)):(Bt=e,e=o),e===o&&(e=me())),e}())===o&&(e=Bt,(n=ve())!==o&&(r=he())!==o?(Ct=e,e=xt(n,r)):(Bt=e,e=o)),e}function Se(){var t,e,n;return(t=he())===o&&(t=ce())===o&&(t=Bt,(e=ve())!==o&&(n=Se())!==o?(Ct=t,t=xt(e,n)):(Bt=t,t=o)),t}function be(){var t,e,n,r,u,i;if(t=Bt,(e=he())!==o){for(n=[],r=Bt,(u=Se())!==o&&(i=he())!==o?r=u=[u,i]:(Bt=r,r=o);r!==o;)n.push(r),r=Bt,(u=Se())!==o&&(i=he())!==o?r=u=[u,i]:(Bt=r,r=o);(r=Se())===o&&(r=null),Ct=t,t=Tt(e,n,r)}else Bt=t,t=o;if(t===o){if(t=Bt,(e=Se())!==o){for(n=[],r=Bt,(u=he())!==o&&(i=Se())!==o?r=u=[u,i]:(Bt=r,r=o);r!==o;)n.push(r),r=Bt,(u=he())!==o&&(i=Se())!==o?r=u=[u,i]:(Bt=r,r=o);(r=he())===o&&(r=null),Ct=t,t=Tt(e,n,r)}else Bt=t,t=o;t===o&&(t=Se())}return t}function ye(){var e,n=function(t){Yt(t)};return n(D),42===t.charCodeAt(Bt)?(e="*",Bt++):e=o,e===o&&(n(V),47===t.charCodeAt(Bt)?(e="/",Bt++):e=o),e}function ge(){var t,e,n,r,u,i;if(t=Bt,(e=be())!==o){for(n=[],r=Bt,(u=ye())!==o&&(i=be())!==o?r=u=[u,i]:(Bt=r,r=o);r!==o;)n.push(r),r=Bt,(u=ye())!==o&&(i=be())!==o?r=u=[u,i]:(Bt=r,r=o);Ct=t,t=Nt(e,n)}else Bt=t,t=o;return t}function Ee(){var e,n=function(t){Yt(t)};return n(U),43===t.charCodeAt(Bt)?(e="+",Bt++):e=o,e===o&&(n(P),45===t.charCodeAt(Bt)?(e="-",Bt++):e=o),e}function Le(){var t,e,n,r,u,i;if(t=Bt,(e=ge())!==o){for(n=[],r=Bt,(u=Ee())!==o&&(i=ge())!==o?r=u=[u,i]:(Bt=r,r=o);r!==o;)n.push(r),r=Bt,(u=Ee())!==o&&(i=ge())!==o?r=u=[u,i]:(Bt=r,r=o);Ct=t,t=Nt(e,n)}else Bt=t,t=o;return t}function Re(){var e,n=function(t){Yt(t)};return n(O),61===t.charCodeAt(Bt)?(e="=",Bt++):e=o,e===o&&(n(F),"!="===t.substr(Bt,2)?(e="!=",Bt+=2):e=o,e===o&&(n(H),">="===t.substr(Bt,2)?(e=">=",Bt+=2):e=o,e===o&&(n(Y),62===t.charCodeAt(Bt)?(e=">",Bt++):e=o,e===o&&(n(j),"<="===t.substr(Bt,2)?(e="<=",Bt+=2):e=o,e===o&&(n(W),60===t.charCodeAt(Bt)?(e="<",Bt++):e=o))))),e}function Ae(){var t,e,n,r,u,i;if(t=Bt,(e=Le())!==o){for(n=[],r=Bt,(u=Re())!==o&&(i=Le())!==o?r=u=[u,i]:(Bt=r,r=o);r!==o;)n.push(r),r=Bt,(u=Re())!==o&&(i=Le())!==o?r=u=[u,i]:(Bt=r,r=o);Ct=t,t=Nt(e,n)}else Bt=t,t=o;return t}function Ie(){var e,n=function(t){Yt(t)};return n($)," and "===t.substr(Bt,5)?(e=" and ",Bt+=5):e=o,e===o&&(n(K)," or "===t.substr(Bt,4)?(e=" or ",Bt+=4):e=o,e===o&&(n(X)," xor "===t.substr(Bt,5)?(e=" xor ",Bt+=5):e=o)),e}function we(){var t,e,n,r,u,i;if(t=Bt,(e=Ae())!==o){for(n=[],r=Bt,(u=Ie())!==o&&(i=Ae())!==o?r=u=[u,i]:(Bt=r,r=o);r!==o;)n.push(r),r=Bt,(u=Ie())!==o&&(i=Ae())!==o?r=u=[u,i]:(Bt=r,r=o);Ct=t,t=Nt(e,n)}else Bt=t,t=o;return t}function ke(){var e,n,r;return e=Bt,function(t){Yt(t)}(_),44===t.charCodeAt(Bt)?(n=",",Bt++):n=o,n!==o&&(r=we())!==o?e=r:(Bt=e,e=o),e}const xe=n(0),Te=n(2);if(Ht(),(u=a())!==o&&Bt===t.length)return u;throw u!==o&&Bt<t.length&&Yt({type:"end"}),function(){var e=Mt[0],n=e.pos;return jt(e.variants,n<t.length?t.charAt(n):null,n<t.length?Ft(n,n+1):Ft(n,n))}()}}},function(t,e,n){"use strict";n.r(e),n.d(e,"buildBinaryExpression",(function(){return u})),n.d(e,"buildImplicitBinaryExpression",(function(){return o})),n.d(e,"buildMenuStatement",(function(){return i})),n.d(e,"buildList",(function(){return a}));var r=n(0);function u(t,e){return e.reduce((function(t,e){return{type:r.BINARY,operator:e[0],left:t,right:e[1]}}),t)}function o(t,e,n){const u=e.flat();return null!==n&&u.push(n),u.reduce((function(t,e){return{type:r.BINARY,operator:"*",left:t,right:e}}),t)}function i(t,e){const n=e.map((function(t){return{option:t[1],location:t[3]}}));return{type:r.MenuStatement,title:t,choices:n}}function a(t,e){return{type:r.LIST,elements:[t].concat(e)}}},function(t,e,n){"use strict";n.r(e),n.d(e,"run",(function(){return tt})),n.d(e,"on",(function(){return J})),n.d(e,"parse",(function(){return L})),n.d(e,"exec",(function(){return et}));var r=n(0);function u(t,e,n=!1){return{type:t,code:e,hideSource:n}}function o(t,e=!1){return u(r.ti,t,e)}const i=o("DATA TYPE"),a=o("SYNTAX"),c=o("UNDEFINED"),l=o("LABEL"),s=o("ARGUMENT"),f=o("DIM MISMATCH"),p=o("DIVIDE BY 0"),d=o("INVALID DIM"),m=o("DOMAIN");function v(t,e=!1){return u(r.lib,t,e)}const h=v("unimplemented");function S(t=0){return{type:r.NUMBER,float:t}}const b=S(1),y=S(-1);var g=n(1),E=n.n(g);function L(t,e={}){if(void 0===t)throw new Error("Undefined source!");const n=e.sourceMap||"inline";return t.split(/\r?\n/).map(t=>{let e;try{e=E.a.parse(t)}catch(t){if("SyntaxError"!==t.name)throw t;e={type:"SyntaxError"}}return"inline"===n&&(e.source=t),e})}function R(t){if(t.type===r.NUMBER)return 0!==t.float;throw i}function A(t,e,n){if(e.type===r.STRINGVARIABLE){if(n.type!==r.STRING)throw i}else if(e.type===r.VARIABLE){if(n.type!==r.NUMBER)return}else if(e.type===r.LISTVARIABLE){if(n.type!==r.LIST)throw i}else{if(e.type!==r.LISTINDEX)throw v("unexpected variable type");if(n.type!==r.LIST)throw i}t.vars[e.name]=n}function I(t,e){t.ans=e}function w(t,e,n){return{type:r.BINARY,operator:e,left:t,right:n}}function k(t){let e="";return void 0!==t.integer&&null!==t.integer&&(e+=t.integer),void 0!==t.fraction&&null!==t.fraction&&(e+="."+t.fraction),void 0!==t.exponent&&null!==t.exponent&&(e+="e"+t.exponent),parseFloat(e)}function x(t,e=!1){if(e&&t.type!==r.STRING)throw i;let n="";switch(t.type){case r.NUMBER:n=t.float.toString(),n.startsWith("0.")&&(n=n.substring(1));break;case r.STRING:n=t.chars;break;case r.LIST:n="{"+t.elements.map(t=>x(t)).join(" ")+"}";break;default:throw v("unexpected value tostring")}return n}function T(t,e){const n=N[t.type];if(void 0===n)throw v("unexpected value");return n(t,e)}const N={};N[r.SyntaxError]=(t,e)=>{throw a},N[r.NUMBER]=(t,e)=>void 0!==t.float?t:{type:r.NUMBER,float:k(t)},N[r.STRING]=(t,e)=>t,N[r.LIST]=(t,e)=>!0===t.resolved?t:{type:r.LIST,elements:t.elements.map((function(t){const n=T(t,e);if(n.type!==r.NUMBER)throw i;return n})),resolved:!0},N[r.VARIABLE]=(t,e)=>{let n=e.vars[t.name];return void 0===n&&(n=e.vars[t.name]=S()),n},N[r.STRINGVARIABLE]=(t,e)=>{const n=e.vars[t.name];if(void 0===n)throw c;return n},N[r.LISTVARIABLE]=(t,e)=>{const n=e.vars[t.name];if(void 0===n)throw c;return n},N[r.LISTINDEX]=(t,e)=>{const n=T(t.list,e),u=T(t.index,e);if(u.type!==r.NUMBER)throw d;if(u.float<1||u.float>n.elements.length)throw d;return{type:r.NUMBER,float:n.elements[u.float-1].float}},N[r.ANS]=(t,e)=>e.ans,N[r.GetKey]=(t,e)=>{throw h},N[r.UNARY]=(t,e)=>{const n=T(t.argument,e),r=B[n.type];if(void 0===r)throw v("unexpected unary argument");return r(t.operator,n)},N[r.BINARY]=(t,e)=>{const n=T(t.left,e),r=T(t.right,e),u=C[n.type];if(void 0===u)throw v("unexpected binary left");return u(t.operator,n,r)};const B={};B[r.NUMBER]=(t,e)=>({type:r.NUMBER,float:M(t,e.float)}),B[r.STRING]=(t,e)=>{throw i},B[r.LIST]=(t,e)=>({type:r.LIST,elements:e.elements.map(e=>({type:r.NUMBER,float:M(t,e.float)})),resolved:!0});const C={};function G(t,e,n){return{type:r.LIST,elements:e.elements.map((e,u)=>({type:r.NUMBER,float:D(t,e.float,n.float)})),resolved:!0}}function M(t,e){switch(t){case"&-":return-1*e;default:throw v("unexpected unary operator")}}function D(t,e,n){if("/"===t&&0===n)throw p;switch(t){case"+":return e+n;case"-":return e-n;case"*":return e*n;case"/":return e/n;case"=":return e===n?1:0;case"!=":return e!==n?1:0;case">=":return e>=n?1:0;case">":return e>n?1:0;case"<=":return e<=n?1:0;case"<":return e<n?1:0;case" and ":return e&&n?1:0;case" or ":return e||n?1:0;case" xor ":return!e&&n||e&&!n?1:0;default:throw v("unexpected binary operator")}}C[r.NUMBER]=(t,e,n)=>{if(n.type!==r.NUMBER){if(n.type===r.LIST)return G(t,n,e);throw i}return{type:r.NUMBER,float:D(t,e.float,n.float)}},C[r.STRING]=(t,e,n)=>{if(n.type!==r.STRING)throw i;if(["+"].includes(t))return{type:r.STRING,chars:D(t,e.chars,n.chars)};if(["=","!="].includes(t))return{type:r.NUMBER,float:D(t,e.chars,n.chars)};throw i},C[r.LIST]=(t,e,n)=>{if(n.type!==r.LIST){if(n.type===r.NUMBER)return G(t,e,n);throw i}if(e.elements.length!==n.elements.length)throw f;return{type:r.LIST,elements:e.elements.map((e,u)=>({type:r.NUMBER,float:D(t,e.float,n.elements[u].float)})),resolved:!0}};const V={};V[r.VARIABLE]=(t,e,n)=>{e.type===r.NUMBER&&(n.vars[t.name]=e)},V[r.STRINGVARIABLE]=(t,e,n)=>{if(e.type!==r.STRING)throw i;n.vars[t.name]=e},V[r.LISTVARIABLE]=(t,e,n)=>{if(e.type!==r.LIST)throw i;n.vars[t.name]=e},V[r.LISTINDEX]=(t,e,n)=>{const u=T(t.list,n),o=T(t.index,n);if(o.type!==r.NUMBER)throw i;if(o.float<1||o.float>u.elements.length)throw d;n.vars[t.list.name].elements[o.float-1]=e};function U(t,e={},n=!0){void 0!==e.output?e.output(t,n):console.log(t)}function P(t,e={}){void 0!==e.stdin&&""!==e.stdin&&void 0===e.stdinQueue&&(e.stdinQueue=e.stdin.split("\n").reverse()),void 0===e.stdinQueue?void 0!==e.input?(setTimeout(()=>e.input.val(""),0),e.input.on("keypress",n=>{if(13===n.keyCode){const n=e.input.val();setTimeout(()=>e.input.val(""),0),!0!==t(n)&&e.input.off("keypress")}})):setTimeout(()=>{!0===t(prompt("Input?"))&&P(t,e)},100):setTimeout(()=>{const n=e.stdinQueue.pop();!0===t(n)&&P(t,e)},0)}const O={};function F(t,e,n){if(!function(t,e){return e.name in t.vars}(t,e))throw c;A(t,e,T({type:r.BINARY,operator:"+",left:e,right:n},t))}function H(t,e,n,u){return U(t,n.io,!1),P(t=>{if(null==t||""===t)return!0;n.resume(()=>{let o;U(t,n.io),o=e.type===r.STRINGVARIABLE&&u?{type:r.STRING,chars:t}:T(function(t){if(void 0===t)throw new Error("Undefined source!");const e=t.split(/\r?\n/);if(e.Length>1)throw new Error("Too many lines for an expression");const n=e[0];let u;try{u=E.a.parse(n)}catch(t){if("SyntaxError"!==t.name)throw t}return void 0!==u&&u.type===r.ValueStatement?u.value:{type:"SyntaxError"}}(t),n.mem),e.type===r.VARIABLE&&o.type===r.LIST&&(e={type:r.LISTVARIABLE,name:"List"+e.name,custom:!0}),A(n.mem,e,o)})},n.io),"suspend"}O[r.EmptyStatement]=(t,e)=>{},O[r.AssignmentStatement]=(t,e)=>{const n=T(t.value,e.mem);!function(t,e,n){const r=V[t.type];if(void 0===r)throw v("unexpected assignable type");r(t,e,n)}(t.assignable,n,e.mem),I(e.mem,n)},O[r.ValueStatement]=(t,e)=>{I(e.mem,T(t.value,e.mem))},O[r.SyntaxError]=(t,e)=>{throw a},O[r.IfStatement]=(t,e)=>{if(null===t.value)throw s;e.ifResult=R(T(t.value,e.mem))},O[r.ThenStatement]=(t,e)=>{throw a},O[r.ElseStatement]=(t,e)=>{if(0===e.blockStack.length)throw a;if(e.lines[e.blockStack.pop()].type!==r.ThenStatement)throw a;e.blockStack.push(e.i),e.falsyStackHeight=e.blockStack.length},O[r.ForLoop]=(t,e)=>{if(null===t.variable||null===t.start||null===t.end)throw s;A(e.mem,t.variable,T(t.start,e.mem)),e.blockStack.push(e.i),R(T(w(t.variable,"<=",t.end),e.mem))||(e.falsyStackHeight=e.blockStack.length)},O[r.WhileLoop]=(t,e)=>{if(null===t.value)throw s;e.blockStack.push(e.i),R(T(t.value,e.mem))||(e.falsyStackHeight=e.blockStack.length)},O[r.RepeatLoop]=(t,e)=>{if(null===t.value)throw s;e.blockStack.push(e.i)},O[r.EndStatement]=(t,e)=>{if(0===e.blockStack.length)throw a;const n=e.blockStack.pop(),u=e.lines[n];if(u.type===r.ForLoop||u.type===r.WhileLoop||u.type===r.RepeatLoop)u.type===r.ForLoop?(F(e.mem,u.variable,null!==u.step?u.step:b),R(T(w(u.variable,"<=",u.end),e.mem))&&(e.blockStack.push(n),e.i=n)):R(T(u.value,e.mem))&&(e.blockStack.push(n),e.i=n);else if(u.type!==r.ThenStatement&&u.type!==r.ElseStatement)throw v("impossibleEndFrom'"+u.type)},O[r.PauseStatement]=(t,e)=>{throw h},O[r.LabelStatement]=(t,e)=>{},O[r.GotoStatement]=(t,e)=>{e.searchLabel=t.location,e.i=-1},O[r.IncrementSkip]=(t,e)=>{if(null===t.variable||null===t.end)throw s;F(e.mem,t.variable,b),e.incrementDecrementResult=R(T(w(t.variable,"<=",t.end),e.mem))},O[r.DecrementSkip]=(t,e)=>{if(null===t.variable||null===t.end)throw s;F(e.mem,t.variable,y),e.incrementDecrementResult=R(T(w(t.variable,">=",t.end),e.mem))},O[r.MenuStatement]=(t,e)=>{if(null===t.title||0===t.choices.length||t.choices.length>7)throw s;return U(x(T(t.title,e.mem),!0),e.io),t.choices.forEach((t,n)=>{U(`${n+1}:${x(t.option)}`,e.io)}),P(n=>{const r=function(t){if(null==t||""===t||t.length>1)return;const e=t.charCodeAt(0)-"0".charCodeAt(0);return e<0||e>9?void 0:e}(n);if(void 0===r||0===r||r>t.choices.length)return!0;e.searchLabel=t.choices[r-1].location,e.i=0,e.resume()},e.io),"suspend"},O[r.ProgramStatement]=(t,e)=>{throw h},O[r.ReturnStatement]=(t,e)=>"done",O[r.StopStatement]=(t,e)=>"done",O[r.DelVarStatement]=(t,e)=>{if(null===t.variable)throw s;var n,r;n=e.mem,r=t.variable,delete n.vars[r.name]},O[r.GraphStyleStatement]=(t,e)=>{throw h},O[r.OpenLibStatement]=(t,e)=>{throw h},O[r.ExecLibStatement]=(t,e)=>{throw h},O[r.Display]=(t,e)=>{null!==t.value&&U(x(T(t.value,e.mem)),e.io)},O[r.Input]=(t,e)=>{if(null===t.variable){if(null!==t.text)throw s;throw h}let n="?";return null!==t.text&&(n=x(T(t.text,e.mem),!0)),H(n,t.variable,e,!0)},O[r.Prompt]=(t,e)=>{if(null===t.variable)throw s;return H(function(t){let e=t.name;switch(t.type){case r.VARIABLE:case r.STRINGVARIABLE:break;case r.LISTVARIABLE:e=e.substring(4),t.custom||(e="&L"+e);break;default:throw v("unexpected variable tostring")}return e}(t.variable)+"=?",t.variable,e,!1)},O[r.DispGraph]=(t,e)=>{throw h},O[r.DispTable]=(t,e)=>{throw h},O[r.Output]=(t,e)=>{if(null===t.row||null===t.column||null===t.value)throw s;const n=T(t.row,e.mem),u=T(t.column,e.mem);if(n.type!==r.NUMBER||u.type!==r.NUMBER)throw i;if(n.float<1||n.float>e.rows||u.float<1||u.float>e.columns)throw m;U(x(T(t.value,e.mem)),e.io)},O[r.ClrHome]=(t,e)=>{throw h},O[r.ClrTable]=(t,e)=>{throw h},O[r.GetCalc]=(t,e)=>{throw h},O[r.Get]=(t,e)=>{throw h},O[r.Send]=(t,e)=>{throw h};const Y={},j=[];let W=!1,$=0;const K=document.createTextNode(null);function X(t){const e=new Event(t);K.dispatchEvent(e)}function _(){!1===W&&(W=!0,X("start"),window.postMessage("daemon-loop","*"))}function q(t,e,n){const r=$++;return console.debug(`[Task ${r}] Start`),Y[r]={func:t,delay:Math.max(e,.001),lastRun:void 0,runOnce:n,stopOnException:!0,suspended:!1},_(),r}function Q(t){if(console.debug(`[Task ${t}] Suspend`),!(t in Y))throw new Error(`Error suspending: task '${t}' not found`);Y[t].suspended=!0}function Z(t){console.debug(`[Task ${t}] Stop`),delete Y[t]}function z(t){!function(t){if(console.debug(`[Task ${t}] Resume`),!(t in Y))throw console.debug(Y),new Error(`Error resuming: task '${t}' not found`);Y[t].suspended=!1,_()}(t)}window.addEventListener("message",(function(t){if(t.source!==window||"daemon-loop"!==t.data)return;t.stopPropagation();const e=performance.now(),n=Object.keys(Y);let r=0,u=0;n.forEach(t=>{const n=Y[t];let o;if(!0===n.suspended)o=0,u+=1;else if(r+=1,void 0===n.lastRun||n.runOnce)o=1;else{const t=e-n.lastRun;o=Math.floor(t/n.delay)}o>0&&(n.lastRun=e);for(let e=0;e<o;e++){let e;try{e=n.func()}catch(t){e="faulted",j.length<1e3&&(j.push(t),window.postMessage("daemon-exception","*"))}if("done"===e||n.runOnce||n.stopOnException&&"faulted"===e){Z(t),r-=1;break}if("suspend"===e){Q(t),r-=1,u+=1;break}if("yield"===e)break}}),0===r?(W=!1,X(u>0?"suspend":"stop")):window.postMessage("daemon-loop","*")}),!0),window.addEventListener("message",(function(t){if(t.source===window&&"daemon-exception"===t.data&&j.length>0)throw j.pop()}),!0);const J=K.addEventListener.bind(K);K.removeEventListener.bind(K);function tt(t,e={}){let n=[];void 0!==e.source&&(n=Array.isArray(e.source)?e.source:e.source.split(/\r?\n/));let u=1;void 0!==e.frequencyMs&&(u=e.frequencyMs);let o=e.outputCallback;var i;void 0!==e.elem&&(i=e.elem,o=(t,e)=>{setTimeout(()=>{let n=i.val()+t;e&&(n+="\n"),i.val(n)},0)});const c={mem:{vars:{},ans:S()},resume:void 0,resumeCallback:void 0,debug:!0===e.debug,sourceLines:n,searchLabel:void 0,ifResult:void 0,incrementDecrementResult:void 0,maximumLines:50,linesRun:0,blockStack:[],falsyStackHeight:void 0,falsyBlockPreviousIf:void 0,i:0,lines:t,callback:e.callback,frequencyMs:u,status:"pending",rows:8,columns:16,io:{output:o,input:e.input,stdin:e.stdin,includeErrors:void 0===e.includeErrors||!0===e.includeErrors,includeLibErrors:void 0===e.includeLibErrors||!0===e.includeLibErrors,includeLineNumbers:void 0===e.includeLineNumbers||!0===e.includeLineNumbers,includeSource:void 0===e.includeSource||!0===e.includeSource}},f=(p=()=>function(t){let e;try{t.status="running",e=function(t){if(t.debug&&console.debug({Line:t.i,searchLabel:t.searchLabel,ifResult:t.ifResult,blockStack:t.blockStack,falsyStackHeight:t.falsyStackHeight,falsyBlockPreviousIf:t.falsyBlockPreviousIf,source:t.source,mem:t.mem}),void 0!==t.resumeCallback&&(t.resumeCallback(),t.resumeCallback=void 0),t.i>=t.lines.length){if(void 0!==t.searchLabel)throw l;if(void 0!==t.ifResult||void 0!==t.incrementDecrementResult)throw a;return t.debug&&console.debug(t.mem),"done"}if(t.linesRun++,t.linesRun>=t.maximumLines)throw v("maxlines");const e=t.lines[t.i],n=e.type;if(void 0!==t.falsyStackHeight){const e=t.blockStack[t.blockStack.length-1],u=t.lines[e];return(n===r.EndStatement||n===r.ElseStatement&&u.type===r.ThenStatement)&&(t.blockStack.pop(),t.blockStack.length<t.falsyStackHeight&&(t.falsyStackHeight=void 0)),(n===r.ForLoop||n===r.RepeatLoop||n===r.WhileLoop||n===r.ThenStatement&&!0===t.falsyBlockPreviousIf||n===r.ElseStatement&&u.type===r.ThenStatement)&&t.blockStack.push(t.i),void(t.falsyBlockPreviousIf=n===r.IfStatement)}if(t.falsyBlockPreviousIf=void 0,void 0===t.searchLabel){if(void 0!==t.ifResult){const e=!0!==t.ifResult;if(t.ifResult=void 0,n===r.ThenStatement)return t.blockStack.push(t.i),void(e&&(t.falsyStackHeight=t.blockStack.length));if(e)return}if(void 0!==t.incrementDecrementResult){const e=!0!==t.incrementDecrementResult;if(t.incrementDecrementResult=void 0,e)return}if(!0===e.extra)throw a;if(!0===e.args)throw s;return function(t,e){const n=O[t.type];if(void 0===n)throw v("unexpected");return n(t,e)}(e,t)}n===r.LabelStatement&&e.location===t.searchLabel&&(t.searchLabel=void 0)}(t)}catch(n){if(t.status="faulted",void 0===n.type)throw n;if(t.i<t.lines.length&&!0!==n.hideSource){let e=t.lines[t.i].source;void 0!==t.sourceLines&&(e=t.sourceLines[t.i]),n.source={index:t.i,line:e}}!function(t,e={}){if(t.type===r.ti&&!e.includeErrors||t.type===r.lib&&!e.includeLibErrors)return void console.log(t);let n="";t.type===r.ti?n+="ERR:":t.type===r.lib?n+="Error: ":n+="Unexpected: ",n+=t.code,e.includeLineNumbers&&void 0!==t.source&&void 0!==t.source.index&&(n+=" on line "+t.source.index),e.includeSource&&void 0!==t.source&&void 0!==t.source.line&&(n+=" :"+t.source.line),U(n,e)}(n,t.io),e="done"}return"done"===e?("faulted"!==t.status&&(t.status="done"),void 0!==t.callback&&setTimeout(t.callback,0)):t.i+=1,e}(c),d=c.frequencyMs,q(p,d));var p,d;return c.resume=t=>{c.resumeCallback=t,z(f)},{getStatus:()=>c.status,isActive:()=>"pending"===c.status||"running"===c.status,stop:()=>{!function(t={}){void 0!==t.input&&t.input.off("keypress")}(c.io),Z(f)}}}function et(t,e){const n=ti.parse(t);ti.run(n,{outputCallback:e})}}]);
//# sourceMappingURL=ti.js.map