var ti;(()=>{"use strict";var t={503:(t,e,n)=>{function r(t,e,n,o){this.message=t,this.expected=e,this.found=n,this.location=o,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,r)}!function(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}(r,Error),r.buildMessage=function(t,e){var n={literal:function(t){return'"'+o(t.text)+'"'},class:function(t){var e=t.parts.map((function(t){return Array.isArray(t)?u(t[0])+"-"+u(t[1]):u(t)}));return"["+(t.inverted?"^":"")+e+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(t){return t.description},not:function(t){return"not "+a(t.expected)}};function r(t){return t.charCodeAt(0).toString(16).toUpperCase()}function o(t){return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+r(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+r(t)}))}function u(t){return t.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(t){return"\\x0"+r(t)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(t){return"\\x"+r(t)}))}function a(t){return n[t.type](t)}return"Expected "+function(t){var e,n,r=t.map(a);if(r.sort(),r.length>0){for(e=1,n=1;e<r.length;e++)r[e-1]!==r[e]&&(r[n]=r[e],n++);r.length=n}switch(r.length){case 1:return r[0];case 2:return r[0]+" or "+r[1];default:return r.slice(0,-1).join(", ")+", or "+r[r.length-1]}}(t)+" but "+function(t){return t?'"'+o(t)+'"':"end of input"}(e)+" found."},t.exports={SyntaxError:r,parse:function(t,e){e=void 0!==e?e:{};var o,u={},a={Start:Ie},i=Ie,l="&theta",s="&list",c="getKey",p=" and ",f=" or ",m=" xor ",d=",",h="Then",v="Else",S="For(",y="While ",b="Repeat ",g="Pause",E="Lbl ",L="Goto ",A="IS>(",R="DS<(",I="Menu(",w="prgm",k="Return",x="Stop",T="DelVar ",N="GraphStyle(",B="OpenLib(",C="ExecLib(",M="Input ",G="Prompt ",D="Disp ",U="DispGraph",V="DispTable",P="Output(",O="ClrHome",F="ClrTable",H="GetCalc(",$="Get(",Y="Send(",W=/^[A-Z]/,j=/^[A-Z0-9]/,K=/^[0-9]/,X=/^[1-6]/,q=/^[+\-]/,Q=/^[^"]/,Z={type:"any"},_=be([["A","Z"]],!1,!1),z=be([["A","Z"],["0","9"]],!1,!1),J=be([["0","9"]],!1,!1),tt=ye(")",!1),et=ye("&theta",!1),nt=ye("Str",!1),rt=ye("&L",!1),ot=be([["1","6"]],!1,!1),ut=ye("&list",!1),at=ye("(",!1),it=be(["+","-"],!1,!1),lt=ye("&E",!1),st=ye(".",!1),ct=be(['"'],!0,!1),pt=ye('"',!1),ft=ye("Ans",!1),mt=ye("getKey",!1),dt=ye("{",!1),ht=ye("}",!1),vt=ye("&-",!1),St=ye("*",!1),yt=ye("/",!1),bt=ye("+",!1),gt=ye("-",!1),Et=ye("=",!1),Lt=ye("!=",!1),At=ye(">=",!1),Rt=ye(">",!1),It=ye("<=",!1),wt=ye("<",!1),kt=ye(" and ",!1),xt=ye(" or ",!1),Tt=ye(" xor ",!1),Nt=ye(",",!1),Bt=ye("->",!1),Ct=ye("If ",!1),Mt=ye("Then",!1),Gt=ye("Else",!1),Dt=ye("For(",!1),Ut=ye("While ",!1),Vt=ye("Repeat ",!1),Pt=ye("End",!1),Ot=ye("Pause",!1),Ft=ye("Lbl ",!1),Ht=ye("Goto ",!1),$t=ye("IS>(",!1),Yt=ye("DS<(",!1),Wt=ye("Menu(",!1),jt=ye("prgm",!1),Kt=ye("Return",!1),Xt=ye("Stop",!1),qt=ye("DelVar ",!1),Qt=ye("GraphStyle(",!1),Zt=ye("OpenLib(",!1),_t=ye("ExecLib(",!1),zt=ye("Input ",!1),Jt=ye("Prompt ",!1),te=ye("Disp ",!1),ee=ye("DispGraph",!1),ne=ye("DispTable",!1),re=ye("Output(",!1),oe=ye("ClrHome",!1),ue=ye("ClrTable",!1),ae=ye("GetCalc(",!1),ie=ye("Get(",!1),le=ye("Send(",!1),se=function(){return Se()},ce=function(t,e){return{type:en.UNARY,operator:t,argument:e}},pe=function(t,e,n){return nn.buildImplicitBinaryExpression(t,e,n)},fe=function(t,e){return nn.buildBinaryExpression(t,e)},me=0,de=0,he=[{line:1,column:1}],ve=[];if("startRule"in e){if(!(e.startRule in a))throw new Error("Can't start parsing from rule \""+e.startRule+'".');i=a[e.startRule]}function Se(){return t.substring(de,me)}function ye(t,e){return{type:"literal",text:t,ignoreCase:e}}function be(t,e,n){return{type:"class",parts:t,inverted:e,ignoreCase:n}}function ge(e){var n,r=he[e];if(r)return r;for(n=e-1;!he[n];)n--;for(r={line:(r=he[n]).line,column:r.column};n<e;)10===t.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return he[e]=r,r}var Ee="string"==typeof e.filename&&e.filename.length>0;function Le(t,n){var r={};Ee&&(r.filename=e.filename);var o=ge(t);r.start={offset:t,line:o.line,column:o.column};var u=ge(n);return r.end={offset:n,line:u.line,column:u.column},r}function Ae(){ve.push({pos:me,variants:[]})}function Re(t){var e=ve[ve.length-1];me<e.pos||(me>e.pos&&(e.pos=me,e.variants=[]),e.variants.push(t))}function Ie(){var e;return e=function(){var e;return(e=function(){var t,e,n,r,o,a;return t=me,e=me,Ae(),n=we(),r=ve.pop(),o=ve[ve.length-1],a=r.variants,o.pos===r.pos&&(a=a.map((function(t){return"not"===t.type?t.expected:{type:"not",expected:t}})),Array.prototype.push.apply(o.variants,a)),n===u?e=void 0:(me=e,e=u),e!==u&&(de=t,e={type:en.EmptyStatement}),e}())===u&&((e=function(){var e,n,r,o,a,i;return e=me,(n=Je())!==u?(Re(Bt),"->"===t.substr(me,2)?(r="->",me+=2):r=u,r!==u&&(o=Ue())!==u?(de=e,a=n,i=o,e={type:en.AssignmentStatement,value:a,assignable:i}):(me=e,e=u)):(me=e,e=u),e}())===u&&(e=function(){var e;return(e=function(){var e,n,r,o,a,i;return e=me,Re(Ct),"If "===t.substr(me,3)?(n="If ",me+=3):n=u,n!==u?((r=Je())===u&&(r=null),(o=Ne())===u&&(o=null),de=e,a=r,i=o,e={type:en.IfStatement,value:a,extra:i}):(me=e,e=u),e}())===u&&((e=function(){var e,n,r,o;return e=me,Re(Mt),t.substr(me,4)===h?(n=h,me+=4):n=u,n!==u?((r=Ne())===u&&(r=null),de=e,o=r,e={type:en.ThenStatement,extra:o}):(me=e,e=u),e}())===u&&((e=function(){var e,n,r,o;return e=me,Re(Gt),t.substr(me,4)===v?(n=v,me+=4):n=u,n!==u?((r=Ne())===u&&(r=null),de=e,o=r,e={type:en.ElseStatement,extra:o}):(me=e,e=u),e}())===u&&((e=function(){var e,n,r,o,a,i,l,s,c,p,f,m,d,h;return e=me,Re(Dt),t.substr(me,4)===S?(n=S,me+=4):n=u,n!==u?((r=De())===u&&(r=null),(o=tn())===u&&(o=null),(a=tn())===u&&(a=null),(i=tn())===u&&(i=null),l=function(){var t,e,n;if(t=me,e=[],(n=tn())!==u)for(;n!==u;)e.push(n),n=tn();else e=u;return e!==u&&(de=t,e=!0),e}(),l===u&&(l=null),Be(),(s=Ne())===u&&(s=null),de=e,c=r,p=o,f=a,m=i,d=l,h=s,e={type:en.ForLoop,variable:c,start:p,end:f,step:m,args:d,extra:h}):(me=e,e=u),e}())===u&&((e=function(){var e,n,r,o,a,i;return e=me,Re(Ut),t.substr(me,6)===y?(n=y,me+=6):n=u,n!==u?((r=Je())===u&&(r=null),(o=Ne())===u&&(o=null),de=e,a=r,i=o,e={type:en.WhileLoop,value:a,extra:i}):(me=e,e=u),e}())===u&&((e=function(){var e,n,r,o,a,i;return e=me,Re(Vt),t.substr(me,7)===b?(n=b,me+=7):n=u,n!==u?((r=Je())===u&&(r=null),(o=Ne())===u&&(o=null),de=e,a=r,i=o,e={type:en.RepeatLoop,value:a,extra:i}):(me=e,e=u),e}())===u&&((e=function(){var e,n,r,o;return e=me,Re(Pt),"End"===t.substr(me,3)?(n="End",me+=3):n=u,n!==u?((r=Ne())===u&&(r=null),de=e,o=r,e={type:en.EndStatement,extra:o}):(me=e,e=u),e}())===u&&((e=function(){var e,n;return e=me,Re(Ot),t.substr(me,5)===g?(n=g,me+=5):n=u,n!==u&&(de=e,n={type:en.PauseStatement}),n}())===u&&((e=function(){var e,n,r,o;return e=me,Re(Ft),t.substr(me,4)===E?(n=E,me+=4):n=u,n!==u&&(r=Ce())!==u?(de=e,o=r,e={type:en.LabelStatement,location:o}):(me=e,e=u),e}())===u&&((e=function(){var e,n,r,o;return e=me,Re(Ht),t.substr(me,5)===L?(n=L,me+=5):n=u,n!==u&&(r=Ce())!==u?(de=e,o=r,e={type:en.GotoStatement,location:o}):(me=e,e=u),e}())===u&&((e=function(){var e,n,r,o,a,i;return e=me,Re($t),t.substr(me,4)===A?(n=A,me+=4):n=u,n!==u?((r=De())===u&&(r=null),(o=tn())===u&&(o=null),Be(),de=e,a=r,i=o,e={type:en.IncrementSkip,variable:a,end:i}):(me=e,e=u),e}())===u&&((e=function(){var e,n,r,o,a,i;return e=me,Re(Yt),t.substr(me,4)===R?(n=R,me+=4):n=u,n!==u?((r=De())===u&&(r=null),(o=tn())===u&&(o=null),Be(),de=e,a=r,i=o,e={type:en.DecrementSkip,variable:a,end:i}):(me=e,e=u),e}())===u&&(e=function(){var e,n,r,o,a,i,l,s,c,p=function(t){Re(t)};if(e=me,p(Wt),t.substr(me,5)===I?(n=I,me+=5):n=u,n!==u){for((r=Je())===u&&(r=null),o=[],a=me,p(Nt),44===t.charCodeAt(me)?(i=d,me++):i=u,i!==u&&(l=Fe())!==u?(p(Nt),44===t.charCodeAt(me)?(s=d,me++):s=u,s!==u&&(c=Ce())!==u?a=i=[i,l,s,c]:(me=a,a=u)):(me=a,a=u);a!==u;)o.push(a),a=me,p(Nt),44===t.charCodeAt(me)?(i=d,me++):i=u,i!==u&&(l=Fe())!==u?(p(Nt),44===t.charCodeAt(me)?(s=d,me++):s=u,s!==u&&(c=Ce())!==u?a=i=[i,l,s,c]:(me=a,a=u)):(me=a,a=u);a=Be(),de=e,e=function(t,e){return nn.buildMenuStatement(t,e)}(r,o)}else me=e,e=u;return e}(),e===u&&((e=function(){var e,n,r,o;return e=me,Re(jt),t.substr(me,4)===w?(n=w,me+=4):n=u,n!==u&&(r=Me())!==u?(de=e,o=r,e={type:en.ProgramStatement,name:o}):(me=e,e=u),e}())===u&&((e=function(){var e,n;return e=me,Re(Kt),t.substr(me,6)===k?(n=k,me+=6):n=u,n!==u&&(de=e,n={type:en.ReturnStatement}),n}())===u&&((e=function(){var e,n;return e=me,Re(Xt),t.substr(me,4)===x?(n=x,me+=4):n=u,n!==u&&(de=e,n={type:en.StopStatement}),n}())===u&&((e=function(){var e,n,r,o;return e=me,Re(qt),t.substr(me,7)===T?(n=T,me+=7):n=u,n!==u?((r=De())===u&&(r=null),de=e,o=r,e={type:en.DelVarStatement,variable:o}):(me=e,e=u),e}())===u&&((e=function(){var e,n,r,o,a,i;return e=me,Re(Qt),t.substr(me,11)===N?(n=N,me+=11):n=u,n!==u?((r=Je())===u&&(r=null),(o=tn())===u&&(o=null),Be(),de=e,a=r,i=o,e={type:en.GraphStyleStatement,equation:a,style:i}):(me=e,e=u),e}())===u&&((e=function(){var e,n,r,o;return e=me,Re(Zt),t.substr(me,8)===B?(n=B,me+=8):n=u,n!==u&&(r=Me())!==u?(Be(),de=e,o=r,e={type:en.OpenLibStatement,name:o}):(me=e,e=u),e}())===u&&(e=function(){var e,n,r,o;return e=me,Re(_t),t.substr(me,8)===C?(n=C,me+=8):n=u,n!==u&&(r=Me())!==u?(Be(),de=e,o=r,e={type:en.ExecLibStatement,name:o}):(me=e,e=u),e}()))))))))))))))))))),e}(),e===u&&(e=function(){var e;return e=function(){var e,n,r,o;return e=me,Re(zt),t.substr(me,6)===M?(n=M,me+=6):n=u,n!==u?(r=function(){var e,n,r;return e=me,(n=Je())!==u?(function(t){Re(t)}(Nt),44===t.charCodeAt(me)?(r=d,me++):r=u,r!==u?e=n:(me=e,e=u)):(me=e,e=u),e}(),r===u&&(r=null),(o=De())===u&&(o=null),de=e,e=function(t,e){return{type:en.Input,text:t,variable:e}}(r,o)):(me=e,e=u),e}(),e===u&&((e=function(){var e,n,r,o;return e=me,Re(Jt),t.substr(me,7)===G?(n=G,me+=7):n=u,n!==u?((r=De())===u&&(r=null),de=e,o=r,e={type:en.Prompt,variable:o}):(me=e,e=u),e}())===u&&((e=function(){var e,n,r,o;return e=me,Re(te),t.substr(me,5)===D?(n=D,me+=5):n=u,n!==u?((r=Je())===u&&(r=null),de=e,o=r,e={type:en.Display,value:o}):(me=e,e=u),e}())===u&&((e=function(){var e,n;return e=me,Re(ee),t.substr(me,9)===U?(n=U,me+=9):n=u,n!==u&&(de=e,n={type:en.DispGraph}),n}())===u&&((e=function(){var e,n;return e=me,Re(ne),t.substr(me,9)===V?(n=V,me+=9):n=u,n!==u&&(de=e,n={type:en.DispTable}),n}())===u&&((e=function(){var e,n,r,o,a,i,l,s;return e=me,Re(re),t.substr(me,7)===P?(n=P,me+=7):n=u,n!==u?((r=Je())===u&&(r=null),(o=tn())===u&&(o=null),(a=tn())===u&&(a=null),Be(),de=e,i=r,l=o,s=a,e={type:en.Output,row:i,column:l,value:s}):(me=e,e=u),e}())===u&&((e=function(){var e,n;return e=me,Re(oe),t.substr(me,7)===O?(n=O,me+=7):n=u,n!==u&&(de=e,n={type:en.ClrHome}),n}())===u&&((e=function(){var e,n;return e=me,Re(ue),t.substr(me,8)===F?(n=F,me+=8):n=u,n!==u&&(de=e,n={type:en.ClrTable}),n}())===u&&((e=function(){var e,n,r,o,a,i;return e=me,Re(ae),t.substr(me,8)===H?(n=H,me+=8):n=u,n!==u?((r=De())===u&&(r=null),(o=tn())===u&&(o=null),Be(),de=e,a=r,i=o,e={type:en.GetCalc,variable:a,portflag:i}):(me=e,e=u),e}())===u&&((e=function(){var e,n,r,o;return e=me,Re(ie),t.substr(me,4)===$?(n=$,me+=4):n=u,n!==u?((r=De())===u&&(r=null),Be(),de=e,o=r,e={type:en.Get,variable:o}):(me=e,e=u),e}())===u&&(e=function(){var e,n,r,o;return e=me,Re(le),t.substr(me,5)===Y?(n=Y,me+=5):n=u,n!==u?((r=De())===u&&(r=null),Be(),de=e,o=r,e={type:en.Send,variable:o}):(me=e,e=u),e}())))))))))),e}(),e===u&&(e=function(){var t,e,n;return t=me,(e=Je())!==u&&(de=t,n=e,e={type:en.ValueStatement,value:n}),e}())))),e}(),e}function we(){var e;return Re(Z),t.length>me?(e=t.charAt(me),me++):e=u,e}function ke(){var e;return Re(_),W.test(t.charAt(me))?(e=t.charAt(me),me++):e=u,e}function xe(){var e;return Re(z),j.test(t.charAt(me))?(e=t.charAt(me),me++):e=u,e}function Te(){var e;return Re(J),K.test(t.charAt(me))?(e=t.charAt(me),me++):e=u,e}function Ne(){var t,e,n;if(t=me,e=[],(n=we())!==u)for(;n!==u;)e.push(n),n=we();else e=u;return e!==u&&(de=t,e=!0),e}function Be(){var e;return Re(tt),41===t.charCodeAt(me)?(e=")",me++):e=u,e===u&&(e=null),e}function Ce(){var t;return t=me,xe()!==u?(xe(),de=t,t=se()):(me=t,t=u),t}function Me(){var t;return t=me,ke()!==u?(xe(),xe(),xe(),xe(),xe(),xe(),xe(),de=t,t=se()):(me=t,t=u),t}function Ge(){var e,n,r;return e=me,n=function(){var e,n,r,o=function(t){Re(t)};return e=me,o(rt),"&L"===t.substr(me,2)?(n="&L",me+=2):n=u,n!==u?(o(ot),X.test(t.charAt(me))?(r=t.charAt(me),me++):r=u,r!==u?(de=e,e="List"+r):(me=e,e=u)):(me=e,e=u),e}(),n!==u&&(de=e,r=n,n={type:en.LISTVARIABLE,name:r,custom:!1}),(e=n)===u&&(e=me,(n=function(){var e,n;return e=me,Re(ut),t.substr(me,5)===s?(n=s,me+=5):n=u,n!==u&&ke()!==u?(xe(),xe(),xe(),xe(),de=e,e="List"+Se().substring(5)):(me=e,e=u),e}())!==u&&(de=e,n=function(t){return{type:en.LISTVARIABLE,name:t,custom:!0}}(n)),e=n),e}function De(){var e;return(e=function(){var e,n,r;return e=me,n=function(){var e,n;return e=me,Re(nt),"Str"===t.substr(me,3)?(n="Str",me+=3):n=u,n!==u&&Te()!==u?(de=e,e=se()):(me=e,e=u),e}(),n!==u&&(de=e,r=n,n={type:en.STRINGVARIABLE,name:r}),n}())===u&&(e=function(){var e,n,r;return e=me,n=function(){var e,n;return(e=ke())===u&&(e=me,Re(et),t.substr(me,6)===l?(n=l,me+=6):n=u,n!==u&&(de=e,n="THETA"),e=n),e}(),n!==u&&(de=e,r=n,n={type:en.VARIABLE,name:r}),n}())===u&&(e=Ge()),e}function Ue(){var e;return(e=function(){var e,n,r,o,a,i;return e=me,(n=Ge())!==u?(Re(at),40===t.charCodeAt(me)?(r="(",me++):r=u,r!==u&&(o=Je())!==u?(Be(),de=e,a=n,i=o,e={type:en.LISTINDEX,list:a,index:i}):(me=e,e=u)):(me=e,e=u),e}())===u&&(e=De()),e}function Ve(){var e,n,r;if(e=me,n=[],(r=Te())!==u)for(;r!==u;)n.push(r),r=Te();else n=u;return n!==u?t.substring(e,me):n}function Pe(){var e,n,r,o;return e=me,n=function(){var e;return Re(lt),"&E"===t.substr(me,2)?(e="&E",me+=2):e=u,e}(),n!==u?(r=me,o=function(){var e,n,r,o;return e=me,n=me,Re(it),q.test(t.charAt(me))?(r=t.charAt(me),me++):r=u,r===u&&(r=null),(o=Ve())!==u?n=r=[r,o]:(me=n,n=u),n!==u?t.substring(e,me):n}(),(r=o!==u?t.substring(r,me):o)!==u?e=r:(me=e,e=u)):(me=e,e=u),e}function Oe(){var e;return Re(ct),Q.test(t.charAt(me))?(e=t.charAt(me),me++):e=u,e}function Fe(){var e,n,r,o,a,i=function(t){Re(t)};return e=me,i(pt),34===t.charCodeAt(me)?(n='"',me++):n=u,n!==u?(r=function(){var e,n,r;for(e=me,n=[],r=Oe();r!==u;)n.push(r),r=Oe();return t.substring(e,me)}(),i(pt),34===t.charCodeAt(me)?(o='"',me++):o=u,o===u&&(o=null),de=e,a=r,e={type:en.STRING,chars:a}):(me=e,e=u),e}function He(){var e;return(e=function(){var e;return(e=function(){var e,n;return e=me,Re(ft),"Ans"===t.substr(me,3)?(n="Ans",me+=3):n=u,n!==u&&(de=e,n={type:en.ANS}),n}())===u&&(e=function(){var e,n;return e=me,Re(mt),t.substr(me,6)===c?(n=c,me+=6):n=u,n!==u&&(de=e,n={type:en.GetKey}),n}()),e}())===u&&(e=Ue())===u&&(e=Fe()),e}function $e(){var e;return Re(vt),"&-"===t.substr(me,2)?(e="&-",me+=2):e=u,e}function Ye(){var e,n,r;return e=function(){var e,n,r,o,a=function(t){Re(t)};return(e=He())===u&&(e=me,a(at),40===t.charCodeAt(me)?(n="(",me++):n=u,n!==u&&(r=Je())!==u?(a(tt),41===t.charCodeAt(me)?(o=")",me++):o=u,o!==u?e=r:(me=e,e=u)):(me=e,e=u),e===u&&(e=function(){var e,n,r,o,a,i,l,s=function(t){Re(t)};if(e=me,s(dt),123===t.charCodeAt(me)?(n="{",me++):n=u,n!==u)if((r=Je())!==u){for(o=[],a=tn();a!==u;)o.push(a),a=tn();s(ht),125===t.charCodeAt(me)?(a="}",me++):a=u,a===u&&(a=null),de=e,i=r,l=o,e=nn.buildList(i,l)}else me=e,e=u;else me=e,e=u;return e}())),e}(),e===u&&(e=me,(n=$e())!==u&&(r=Ye())!==u?(de=e,e=ce(n,r)):(me=e,e=u)),e}function We(){var e,n,r;return(e=Ye())===u&&(e=function(){var e,n,r,o,a,i,l,s,c=function(t){Re(t)};return e=me,(n=Ve())!==u?(c(st),46===t.charCodeAt(me)?(r=".",me++):r=u,r!==u?((o=Ve())===u&&(o=null),(a=Pe())===u&&(a=null),de=e,i=n,l=o,s=a,e={type:en.NUMBER,integer:i,fraction:l,exponent:s}):(me=e,e=u)):(me=e,e=u),e===u&&(e=me,c(st),46===t.charCodeAt(me)?(n=".",me++):n=u,n!==u&&(r=Ve())!==u?((o=Pe())===u&&(o=null),de=e,e=function(t,e){return{type:en.NUMBER,fraction:t,exponent:e}}(r,o)):(me=e,e=u),e===u&&(e=me,(n=Ve())!==u?((r=Pe())===u&&(r=null),de=e,e=function(t,e){return{type:en.NUMBER,integer:t,exponent:e}}(n,r)):(me=e,e=u))),e}())===u&&(e=me,(n=$e())!==u&&(r=We())!==u?(de=e,e=ce(n,r)):(me=e,e=u)),e}function je(){var t,e,n,r,o,a;if(t=me,(e=Ye())!==u){for(n=[],r=me,(o=We())!==u&&(a=Ye())!==u?r=o=[o,a]:(me=r,r=u);r!==u;)n.push(r),r=me,(o=We())!==u&&(a=Ye())!==u?r=o=[o,a]:(me=r,r=u);(r=We())===u&&(r=null),de=t,t=pe(e,n,r)}else me=t,t=u;if(t===u){if(t=me,(e=We())!==u){for(n=[],r=me,(o=Ye())!==u&&(a=We())!==u?r=o=[o,a]:(me=r,r=u);r!==u;)n.push(r),r=me,(o=Ye())!==u&&(a=We())!==u?r=o=[o,a]:(me=r,r=u);(r=Ye())===u&&(r=null),de=t,t=pe(e,n,r)}else me=t,t=u;t===u&&(t=We())}return t}function Ke(){var e,n=function(t){Re(t)};return n(St),42===t.charCodeAt(me)?(e="*",me++):e=u,e===u&&(n(yt),47===t.charCodeAt(me)?(e="/",me++):e=u),e}function Xe(){var t,e,n,r,o,a;if(t=me,(e=je())!==u){for(n=[],r=me,(o=Ke())!==u&&(a=je())!==u?r=o=[o,a]:(me=r,r=u);r!==u;)n.push(r),r=me,(o=Ke())!==u&&(a=je())!==u?r=o=[o,a]:(me=r,r=u);de=t,t=fe(e,n)}else me=t,t=u;return t}function qe(){var e,n=function(t){Re(t)};return n(bt),43===t.charCodeAt(me)?(e="+",me++):e=u,e===u&&(n(gt),45===t.charCodeAt(me)?(e="-",me++):e=u),e}function Qe(){var t,e,n,r,o,a;if(t=me,(e=Xe())!==u){for(n=[],r=me,(o=qe())!==u&&(a=Xe())!==u?r=o=[o,a]:(me=r,r=u);r!==u;)n.push(r),r=me,(o=qe())!==u&&(a=Xe())!==u?r=o=[o,a]:(me=r,r=u);de=t,t=fe(e,n)}else me=t,t=u;return t}function Ze(){var e,n=function(t){Re(t)};return n(Et),61===t.charCodeAt(me)?(e="=",me++):e=u,e===u&&(n(Lt),"!="===t.substr(me,2)?(e="!=",me+=2):e=u,e===u&&(n(At),">="===t.substr(me,2)?(e=">=",me+=2):e=u,e===u&&(n(Rt),62===t.charCodeAt(me)?(e=">",me++):e=u,e===u&&(n(It),"<="===t.substr(me,2)?(e="<=",me+=2):e=u,e===u&&(n(wt),60===t.charCodeAt(me)?(e="<",me++):e=u))))),e}function _e(){var t,e,n,r,o,a;if(t=me,(e=Qe())!==u){for(n=[],r=me,(o=Ze())!==u&&(a=Qe())!==u?r=o=[o,a]:(me=r,r=u);r!==u;)n.push(r),r=me,(o=Ze())!==u&&(a=Qe())!==u?r=o=[o,a]:(me=r,r=u);de=t,t=fe(e,n)}else me=t,t=u;return t}function ze(){var e,n=function(t){Re(t)};return n(kt),t.substr(me,5)===p?(e=p,me+=5):e=u,e===u&&(n(xt),t.substr(me,4)===f?(e=f,me+=4):e=u,e===u&&(n(Tt),t.substr(me,5)===m?(e=m,me+=5):e=u)),e}function Je(){var t,e,n,r,o,a;if(t=me,(e=_e())!==u){for(n=[],r=me,(o=ze())!==u&&(a=_e())!==u?r=o=[o,a]:(me=r,r=u);r!==u;)n.push(r),r=me,(o=ze())!==u&&(a=_e())!==u?r=o=[o,a]:(me=r,r=u);de=t,t=fe(e,n)}else me=t,t=u;return t}function tn(){var e,n,r;return e=me,Re(Nt),44===t.charCodeAt(me)?(n=d,me++):n=u,n!==u&&(r=Je())!==u?e=r:(me=e,e=u),e}const en=n(831),nn=n(802);if(Ae(),(o=i())!==u&&me===t.length)return o;throw o!==u&&me<t.length&&Re({type:"end"}),rn=ve[0],on=rn.pos,function(t,e,n){return new r(r.buildMessage(t,e),t,e,n)}(rn.variants,on<t.length?t.charAt(on):null,on<t.length?Le(on,on+1):Le(on,on));var rn,on}}},831:(t,e,n)=>{n.r(e),n.d(e,{ANS:()=>s,AssignmentStatement:()=>b,BINARY:()=>h,ClrHome:()=>K,ClrTable:()=>X,DecrementSkip:()=>B,DelVarStatement:()=>U,DispGraph:()=>Y,DispTable:()=>W,Display:()=>$,ElseStatement:()=>L,EmptyStatement:()=>S,EndStatement:()=>w,ExecLibStatement:()=>O,ForLoop:()=>A,Get:()=>Q,GetCalc:()=>q,GetKey:()=>c,GotoStatement:()=>T,GraphStyleStatement:()=>V,IfStatement:()=>g,IncrementSkip:()=>N,Input:()=>F,LIST:()=>i,LISTINDEX:()=>d,LISTVARIABLE:()=>m,LabelStatement:()=>x,MenuStatement:()=>C,NUMBER:()=>a,OpenLibStatement:()=>P,Output:()=>j,PauseStatement:()=>k,ProgramStatement:()=>M,Prompt:()=>H,RepeatLoop:()=>I,ReturnStatement:()=>G,STRING:()=>l,STRINGVARIABLE:()=>f,Send:()=>Z,StopStatement:()=>D,SyntaxError:()=>u,ThenStatement:()=>E,UNARY:()=>v,VARIABLE:()=>p,ValueStatement:()=>y,WhileLoop:()=>R,lib:()=>o,ti:()=>r});const r="ti",o="lib",u="SyntaxError",a="number",i="list",l="string",s="ans",c="GetKey",p="variable",f="stringVariable",m="listVariable",d="listIndex",h="binary",v="unary",S="empty",y="value",b="assign",g="IfStatement",E="ThenStatement",L="ElseStatement",A="ForLoop",R="WhileLoop",I="RepeatLoop",w="EndStatement",k="PauseStatement",x="LabelStatement",T="GotoStatement",N="IncrementSkip",B="DecrementSkip",C="MenuStatement",M="ProgramStatement",G="ReturnStatement",D="StopStatement",U="DelVarStatement",V="GraphStyleStatement",P="OpenLibStatement",O="ExecLibStatement",F="Input",H="Prompt",$="display",Y="DispGraph",W="DispTable",j="Output",K="ClrHome",X="ClrTable",q="GetCalc",Q="Get",Z="Send"},802:(t,e,n)=>{n.r(e),n.d(e,{buildBinaryExpression:()=>o,buildImplicitBinaryExpression:()=>u,buildList:()=>i,buildMenuStatement:()=>a});var r=n(831);function o(t,e){return e.reduce((function(t,e){return{type:r.BINARY,operator:e[0],left:t,right:e[1]}}),t)}function u(t,e,n){const o=e.flat();return null!==n&&o.push(n),o.reduce((function(t,e){return{type:r.BINARY,operator:"*",left:t,right:e}}),t)}function a(t,e){const n=e.map((function(t){return{option:t[1],location:t[3]}}));return{type:r.MenuStatement,title:t,choices:n}}function i(t,e){return{type:r.LIST,elements:[t].concat(e)}}}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var u=e[r]={exports:{}};return t[r](u,u.exports,n),u.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};(()=>{n.r(r),n.d(r,{exec:()=>rt,on:()=>et,parse:()=>R,run:()=>nt});var t=n(831);function e(t,e,n=!1){return{type:t,code:e,hideSource:n}}function o(n,r=!1){return e(t.ti,n,r)}const u=o("DATA TYPE"),a=o("SYNTAX"),i=o("UNDEFINED"),l=o("LABEL"),s=o("ARGUMENT"),c=o("DIM MISMATCH"),p=o("DIVIDE BY 0"),f=o("INVALID DIM"),m=o("DOMAIN");function d(n,r=!1){return e(t.lib,n,r)}const h=d("unimplemented");function v(e=0){return{type:t.NUMBER,float:e}}const S=v(1),y=v(-1),b="done",g="faulted",E="suspend";var L=n(503),A=n.n(L);function R(t,e={}){if(void 0===t)throw new Error("Undefined source!");const n=e.sourceMap||"inline",r=t.split(/\r?\n/).map((t=>{let e;try{e=A().parse(t)}catch(t){if("SyntaxError"!==t.name)throw t;e={type:"SyntaxError"}}return"inline"===n&&(e.source=t),e}));return r}function I(e){if(e.type===t.NUMBER)return 0!==e.float;throw u}function w(e,n,r){if(n.type===t.STRINGVARIABLE){if(r.type!==t.STRING)throw u}else if(n.type===t.VARIABLE){if(r.type!==t.NUMBER)return}else if(n.type===t.LISTVARIABLE){if(r.type!==t.LIST)throw u}else{if(n.type!==t.LISTINDEX)throw d("unexpected variable type");if(r.type!==t.LIST)throw u}e.vars[n.name]=r}function k(t,e){t.ans=e}function x(e,n,r){return{type:t.BINARY,operator:n,left:e,right:r}}function T(t){let e="";return void 0!==t.integer&&null!==t.integer&&(e+=t.integer),void 0!==t.fraction&&null!==t.fraction&&(e+="."+t.fraction),void 0!==t.exponent&&null!==t.exponent&&(e+="e"+t.exponent),parseFloat(e)}function N(e,n=!1){if(n&&e.type!==t.STRING)throw u;let r="";switch(e.type){case t.NUMBER:r=e.float.toString(),r.startsWith("0.")&&(r=r.substring(1));break;case t.STRING:r=e.chars;break;case t.LIST:r="{"+e.elements.map((t=>N(t))).join(" ")+"}";break;default:throw d("unexpected value tostring")}return r}function B(t,e){const n=C[t.type];if(void 0===n)throw d("unexpected value");return n(t,e)}const C={};C[t.SyntaxError]=(t,e)=>{throw a},C[t.NUMBER]=(e,n)=>void 0!==e.float?e:{type:t.NUMBER,float:T(e)},C[t.STRING]=(t,e)=>t,C[t.LIST]=(e,n)=>!0===e.resolved?e:{type:t.LIST,elements:e.elements.map((function(e){const r=B(e,n);if(r.type!==t.NUMBER)throw u;return r})),resolved:!0},C[t.VARIABLE]=(t,e)=>{let n=e.vars[t.name];return void 0===n&&(n=e.vars[t.name]=v()),n},C[t.STRINGVARIABLE]=(t,e)=>{const n=e.vars[t.name];if(void 0===n)throw i;return n},C[t.LISTVARIABLE]=(t,e)=>{const n=e.vars[t.name];if(void 0===n)throw i;return n},C[t.LISTINDEX]=(e,n)=>{const r=B(e.list,n),o=B(e.index,n);if(o.type!==t.NUMBER)throw f;if(o.float<1||o.float>r.elements.length)throw f;return{type:t.NUMBER,float:r.elements[o.float-1].float}},C[t.ANS]=(t,e)=>e.ans,C[t.GetKey]=(t,e)=>{throw h},C[t.UNARY]=(t,e)=>{const n=B(t.argument,e),r=M[n.type];if(void 0===r)throw d("unexpected unary argument");return r(t.operator,n)},C[t.BINARY]=(t,e)=>{const n=B(t.left,e),r=B(t.right,e),o=G[n.type];if(void 0===o)throw d("unexpected binary left");return o(t.operator,n,r)};const M={};M[t.NUMBER]=(e,n)=>({type:t.NUMBER,float:U(e,n.float)}),M[t.STRING]=(t,e)=>{throw u},M[t.LIST]=(e,n)=>({type:t.LIST,elements:n.elements.map((n=>({type:t.NUMBER,float:U(e,n.float)}))),resolved:!0});const G={};function D(e,n,r){return{type:t.LIST,elements:n.elements.map(((n,o)=>({type:t.NUMBER,float:V(e,n.float,r.float)}))),resolved:!0}}function U(t,e){if("&-"===t)return-1*e;throw d("unexpected unary operator")}function V(t,e,n){if("/"===t&&0===n)throw p;switch(t){case"+":return e+n;case"-":return e-n;case"*":return e*n;case"/":return e/n;case"=":return e===n?1:0;case"!=":return e!==n?1:0;case">=":return e>=n?1:0;case">":return e>n?1:0;case"<=":return e<=n?1:0;case"<":return e<n?1:0;case" and ":return e&&n?1:0;case" or ":return e||n?1:0;case" xor ":return!e&&n||e&&!n?1:0;default:throw d("unexpected binary operator")}}G[t.NUMBER]=(e,n,r)=>{if(r.type!==t.NUMBER){if(r.type===t.LIST)return D(e,r,n);throw u}return{type:t.NUMBER,float:V(e,n.float,r.float)}},G[t.STRING]=(e,n,r)=>{if(r.type!==t.STRING)throw u;if(["+"].includes(e))return{type:t.STRING,chars:V(e,n.chars,r.chars)};if(["=","!="].includes(e))return{type:t.NUMBER,float:V(e,n.chars,r.chars)};throw u},G[t.LIST]=(e,n,r)=>{if(r.type!==t.LIST){if(r.type===t.NUMBER)return D(e,n,r);throw u}if(n.elements.length!==r.elements.length)throw c;return{type:t.LIST,elements:n.elements.map(((n,o)=>({type:t.NUMBER,float:V(e,n.float,r.elements[o].float)}))),resolved:!0}};const P={};function O(t,e={},n=!0){void 0!==e.output?e.output(t,n):console.log(t)}function F(t,e={}){void 0!==e.stdin&&""!==e.stdin&&void 0===e.stdinQueue&&(e.stdinQueue=e.stdin.split("\n").reverse()),void 0===e.stdinQueue?void 0!==e.input?(setTimeout((()=>e.input.val("")),0),e.input.on("keypress",(n=>{if(13===n.keyCode){const n=e.input.val();setTimeout((()=>e.input.val("")),0),!0!==t(n)&&e.input.off("keypress")}}))):setTimeout((()=>{!0===t(prompt("Input?"))&&F(t,e)}),100):setTimeout((()=>{const n=e.stdinQueue.pop();!0===t(n)&&F(t,e)}),0)}P[t.VARIABLE]=(e,n,r)=>{n.type===t.NUMBER&&(r.vars[e.name]=n)},P[t.STRINGVARIABLE]=(e,n,r)=>{if(n.type!==t.STRING)throw u;r.vars[e.name]=n},P[t.LISTVARIABLE]=(e,n,r)=>{if(n.type!==t.LIST)throw u;r.vars[e.name]=n},P[t.LISTINDEX]=(e,n,r)=>{const o=B(e.list,r),a=B(e.index,r);if(a.type!==t.NUMBER)throw u;if(a.float<1||a.float>o.elements.length)throw f;r.vars[e.list.name].elements[a.float-1]=n};const H={};function $(e,n,r){if(!function(t,e){return e.name in t.vars}(e,n))throw i;w(e,n,B({type:t.BINARY,operator:"+",left:n,right:r},e))}function Y(e,n,r,o){return O(e,r.io,!1),F((e=>{if(null==e||""===e)return!0;r.resume((()=>{let u;O(e,r.io),u=n.type===t.STRINGVARIABLE&&o?{type:t.STRING,chars:e}:B(function(e){if(void 0===e)throw new Error("Undefined source!");const n=e.split(/\r?\n/);if(n.Length>1)throw new Error("Too many lines for an expression");const r=n[0];let o;try{o=A().parse(r)}catch(t){if("SyntaxError"!==t.name)throw t}return void 0!==o&&o.type===t.ValueStatement?o.value:{type:"SyntaxError"}}(e),r.mem),n.type===t.VARIABLE&&u.type===t.LIST&&(n={type:t.LISTVARIABLE,name:`List${n.name}`,custom:!0}),w(r.mem,n,u)}))}),r.io),E}H[t.EmptyStatement]=(t,e)=>{},H[t.AssignmentStatement]=(t,e)=>{const n=B(t.value,e.mem);!function(t,e,n){const r=P[t.type];if(void 0===r)throw d("unexpected assignable type");r(t,e,n)}(t.assignable,n,e.mem),k(e.mem,n)},H[t.ValueStatement]=(t,e)=>{k(e.mem,B(t.value,e.mem))},H[t.SyntaxError]=(t,e)=>{throw a},H[t.IfStatement]=(t,e)=>{if(null===t.value)throw s;e.ifResult=I(B(t.value,e.mem))},H[t.ThenStatement]=(t,e)=>{throw a},H[t.ElseStatement]=(e,n)=>{if(0===n.blockStack.length)throw a;if(n.lines[n.blockStack.pop()].type!==t.ThenStatement)throw a;n.blockStack.push(n.i),n.falsyStackHeight=n.blockStack.length},H[t.ForLoop]=(t,e)=>{if(null===t.variable||null===t.start||null===t.end)throw s;w(e.mem,t.variable,B(t.start,e.mem)),e.blockStack.push(e.i),I(B(x(t.variable,"<=",t.end),e.mem))||(e.falsyStackHeight=e.blockStack.length)},H[t.WhileLoop]=(t,e)=>{if(null===t.value)throw s;e.blockStack.push(e.i),I(B(t.value,e.mem))||(e.falsyStackHeight=e.blockStack.length)},H[t.RepeatLoop]=(t,e)=>{if(null===t.value)throw s;e.blockStack.push(e.i)},H[t.EndStatement]=(e,n)=>{if(0===n.blockStack.length)throw a;const r=n.blockStack.pop(),o=n.lines[r];if(o.type===t.ForLoop||o.type===t.WhileLoop||o.type===t.RepeatLoop)o.type===t.ForLoop?($(n.mem,o.variable,null!==o.step?o.step:S),I(B(x(o.variable,"<=",o.end),n.mem))&&(n.blockStack.push(r),n.i=r)):I(B(o.value,n.mem))&&(n.blockStack.push(r),n.i=r);else if(o.type!==t.ThenStatement&&o.type!==t.ElseStatement)throw d(`impossibleEndFrom'${o.type}`)},H[t.PauseStatement]=(t,e)=>{throw h},H[t.LabelStatement]=(t,e)=>{},H[t.GotoStatement]=(t,e)=>{e.searchLabel=t.location,e.i=-1},H[t.IncrementSkip]=(t,e)=>{if(null===t.variable||null===t.end)throw s;$(e.mem,t.variable,S),e.incrementDecrementResult=I(B(x(t.variable,"<=",t.end),e.mem))},H[t.DecrementSkip]=(t,e)=>{if(null===t.variable||null===t.end)throw s;$(e.mem,t.variable,y),e.incrementDecrementResult=I(B(x(t.variable,">=",t.end),e.mem))},H[t.MenuStatement]=(t,e)=>{if(null===t.title||0===t.choices.length||t.choices.length>7)throw s;return O(N(B(t.title,e.mem),!0),e.io),t.choices.forEach(((t,n)=>{O(`${n+1}:${N(t.option)}`,e.io)})),F((n=>{const r=function(t){if(null==t||""===t||t.length>1)return;const e=t.charCodeAt(0)-"0".charCodeAt(0);return e<0||e>9?void 0:e}(n);if(void 0===r||0===r||r>t.choices.length)return!0;e.searchLabel=t.choices[r-1].location,e.i=0,e.resume()}),e.io),E},H[t.ProgramStatement]=(t,e)=>{throw h},H[t.ReturnStatement]=(t,e)=>b,H[t.StopStatement]=(t,e)=>b,H[t.DelVarStatement]=(t,e)=>{if(null===t.variable)throw s;var n,r;n=e.mem,r=t.variable,delete n.vars[r.name]},H[t.GraphStyleStatement]=(t,e)=>{throw h},H[t.OpenLibStatement]=(t,e)=>{throw h},H[t.ExecLibStatement]=(t,e)=>{throw h},H[t.Display]=(t,e)=>{null!==t.value&&O(N(B(t.value,e.mem)),e.io)},H[t.Input]=(t,e)=>{if(null===t.variable){if(null!==t.text)throw s;throw h}let n="?";return null!==t.text&&(n=N(B(t.text,e.mem),!0)),Y(n,t.variable,e,!0)},H[t.Prompt]=(e,n)=>{if(null===e.variable)throw s;return Y(`${function(e){let n=e.name;switch(e.type){case t.VARIABLE:case t.STRINGVARIABLE:break;case t.LISTVARIABLE:n=n.substring(4),e.custom||(n=`&L${n}`);break;default:throw d("unexpected variable tostring")}return n}(e.variable)}=?`,e.variable,n,!1)},H[t.DispGraph]=(t,e)=>{throw h},H[t.DispTable]=(t,e)=>{throw h},H[t.Output]=(e,n)=>{if(null===e.row||null===e.column||null===e.value)throw s;const r=B(e.row,n.mem),o=B(e.column,n.mem);if(r.type!==t.NUMBER||o.type!==t.NUMBER)throw u;if(r.float<1||r.float>n.rows||o.float<1||o.float>n.columns)throw m;O(N(B(e.value,n.mem)),n.io)},H[t.ClrHome]=(t,e)=>{throw h},H[t.ClrTable]=(t,e)=>{throw h},H[t.GetCalc]=(t,e)=>{throw h},H[t.Get]=(t,e)=>{throw h},H[t.Send]=(t,e)=>{throw h};const W="daemon-loop",j="daemon-exception",K={},X=[];let q=!1,Q=0;const Z=document.createTextNode(null);function _(t){const e=new Event(t);Z.dispatchEvent(e)}function z(){!1===q&&(q=!0,_("start"),window.postMessage(W,"*"))}function J(t){if(console.debug(`[Task ${t}] Suspend`),!(t in K))throw new Error(`Error suspending: task '${t}' not found`);K[t].suspended=!0}function tt(t){console.debug(`[Task ${t}] Stop`),delete K[t]}window.addEventListener("message",(function(t){if(t.source!==window||t.data!==W)return;t.stopPropagation();const e=performance.now(),n=Object.keys(K);let r=0,o=0;n.forEach((t=>{const n=K[t];let u;if(!0===n.suspended)u=0,o+=1;else if(r+=1,void 0===n.lastRun||n.runOnce)u=1;else{const t=e-n.lastRun;u=Math.floor(t/n.delay)}u>0&&(n.lastRun=e);for(let e=0;e<u;e++){let e;try{e=n.func()}catch(t){e=g,X.length<1e3&&(X.push(t),window.postMessage(j,"*"))}if(e===b||n.runOnce||n.stopOnException&&e===g){tt(t),r-=1;break}if(e===E){J(t),r-=1,o+=1;break}if("yield"===e)break}})),0===r?(q=!1,_(o>0?"suspend":"stop")):window.postMessage(W,"*")}),!0),window.addEventListener("message",(function(t){if(t.source===window&&t.data===j&&X.length>0)throw X.pop()}),!0);const et=Z.addEventListener.bind(Z);function nt(e,n={}){let r=[];void 0!==n.source&&(r=Array.isArray(n.source)?n.source:n.source.split(/\r?\n/));let o=1;void 0!==n.frequencyMs&&(o=n.frequencyMs);let u=n.outputCallback;var i;void 0!==n.elem&&(i=n.elem,u=(t,e)=>{setTimeout((()=>{let n=i.val()+t;e&&(n+="\n"),i.val(n)}),0)});const c={mem:{vars:{},ans:v()},resume:void 0,resumeCallback:void 0,debug:!0===n.debug,sourceLines:r,searchLabel:void 0,ifResult:void 0,incrementDecrementResult:void 0,maximumLines:50,linesRun:0,blockStack:[],falsyStackHeight:void 0,falsyBlockPreviousIf:void 0,i:0,lines:e,callback:n.callback,frequencyMs:o,status:"pending",rows:8,columns:16,io:{output:u,input:n.input,stdin:n.stdin,includeErrors:void 0===n.includeErrors||!0===n.includeErrors,includeLibErrors:void 0===n.includeLibErrors||!0===n.includeLibErrors,includeLineNumbers:void 0===n.includeLineNumbers||!0===n.includeLineNumbers,includeSource:void 0===n.includeSource||!0===n.includeSource}},p=(f=()=>function(e){let n;try{e.status="running",n=function(e){if(e.debug&&console.debug({Line:e.i,searchLabel:e.searchLabel,ifResult:e.ifResult,blockStack:e.blockStack,falsyStackHeight:e.falsyStackHeight,falsyBlockPreviousIf:e.falsyBlockPreviousIf,source:e.source,mem:e.mem}),void 0!==e.resumeCallback&&(e.resumeCallback(),e.resumeCallback=void 0),e.i>=e.lines.length){if(void 0!==e.searchLabel)throw l;if(void 0!==e.ifResult||void 0!==e.incrementDecrementResult)throw a;return e.debug&&console.debug(e.mem),b}if(e.linesRun++,e.linesRun>=e.maximumLines)throw d("maxlines");const n=e.lines[e.i],r=n.type;if(void 0!==e.falsyStackHeight){const n=e.blockStack[e.blockStack.length-1],o=e.lines[n];return(r===t.EndStatement||r===t.ElseStatement&&o.type===t.ThenStatement)&&(e.blockStack.pop(),e.blockStack.length<e.falsyStackHeight&&(e.falsyStackHeight=void 0)),(r===t.ForLoop||r===t.RepeatLoop||r===t.WhileLoop||r===t.ThenStatement&&!0===e.falsyBlockPreviousIf||r===t.ElseStatement&&o.type===t.ThenStatement)&&e.blockStack.push(e.i),void(e.falsyBlockPreviousIf=r===t.IfStatement)}if(e.falsyBlockPreviousIf=void 0,void 0===e.searchLabel){if(void 0!==e.ifResult){const n=!0!==e.ifResult;if(e.ifResult=void 0,r===t.ThenStatement)return e.blockStack.push(e.i),void(n&&(e.falsyStackHeight=e.blockStack.length));if(n)return}if(void 0!==e.incrementDecrementResult){const t=!0!==e.incrementDecrementResult;if(e.incrementDecrementResult=void 0,t)return}if(!0===n.extra)throw a;if(!0===n.args)throw s;return function(t,e){const n=H[t.type];if(void 0===n)throw d("unexpected");return n(t,e)}(n,e)}r===t.LabelStatement&&n.location===e.searchLabel&&(e.searchLabel=void 0)}(e)}catch(r){if(e.status="faulted",void 0===r.type)throw r;if(e.i<e.lines.length&&!0!==r.hideSource){let t=e.lines[e.i].source;void 0!==e.sourceLines&&(t=e.sourceLines[e.i]),r.source={index:e.i,line:t}}!function(e,n={}){if(e.type===t.ti&&!n.includeErrors||e.type===t.lib&&!n.includeLibErrors)return void console.log(e);let r="";e.type===t.ti?r+="ERR:":e.type===t.lib?r+="Error: ":r+="Unexpected: ",r+=e.code,n.includeLineNumbers&&void 0!==e.source&&void 0!==e.source.index&&(r+=` on line ${e.source.index}`),n.includeSource&&void 0!==e.source&&void 0!==e.source.line&&(r+=` :${e.source.line}`),O(r,n)}(r,e.io),n=b}return n===b?("faulted"!==e.status&&(e.status="done"),void 0!==e.callback&&setTimeout(e.callback,0)):e.i+=1,n}(c),function(t,e,n){const r=Q++;return console.debug(`[Task ${r}] Start`),K[r]={func:t,delay:Math.max(e,.001),lastRun:void 0,runOnce:n,stopOnException:!0,suspended:!1},z(),r}(f,c.frequencyMs));var f;return c.resume=t=>{c.resumeCallback=t,function(t){if(console.debug(`[Task ${t}] Resume`),!(t in K))throw console.debug(K),new Error(`Error resuming: task '${t}' not found`);K[t].suspended=!1,z()}(p)},{getStatus:()=>c.status,isActive:()=>"pending"===c.status||"running"===c.status,stop:()=>{!function(t={}){void 0!==t.input&&t.input.off("keypress")}(c.io),tt(p)}}}function rt(t,e){const n=ti.parse(t);ti.run(n,{outputCallback:e})}Z.removeEventListener.bind(Z)})(),ti=r})();
//# sourceMappingURL=ti.js.map