var ti;(()=>{"use strict";var e={62:(e,t,n)=>{function r(e,t,n,o){var u=Error.call(this,e);return Object.setPrototypeOf&&Object.setPrototypeOf(u,r.prototype),u.expected=t,u.found=n,u.location=o,u.name="SyntaxError",u}function o(e,t,n){return n=n||" ",e.length>t?e:(t-=e.length,e+(n+=n.repeat(t)).slice(0,t))}!function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}(r,Error),r.prototype.format=function(e){var t="Error: "+this.message;if(this.location){var n,r=null;for(n=0;n<e.length;n++)if(e[n].source===this.location.source){r=e[n].text.split(/\r\n|\n|\r/g);break}var u=this.location.start,a=this.location.source+":"+u.line+":"+u.column;if(r){var i=this.location.end,l=o("",u.line.toString().length," "),s=r[u.line-1],c=(u.line===i.line?i.column:s.length+1)-u.column||1;t+="\n --\x3e "+a+"\n"+l+" |\n"+u.line+" | "+s+"\n"+l+" | "+o("",u.column-1," ")+o("",c,"^")}else t+="\n at "+a}return t},r.buildMessage=function(e,t){var n={literal:function(e){return'"'+o(e.text)+'"'},class:function(e){var t=e.parts.map((function(e){return Array.isArray(e)?u(e[0])+"-"+u(e[1]):u(e)}));return"["+(e.inverted?"^":"")+t.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(e){return e.description}};function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function o(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+r(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+r(e)}))}function u(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+r(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+r(e)}))}function a(e){return n[e.type](e)}return"Expected "+function(e){var t,n,r=e.map(a);if(r.sort(),r.length>0){for(t=1,n=1;t<r.length;t++)r[t-1]!==r[t]&&(r[n]=r[t],n++);r.length=n}switch(r.length){case 1:return r[0];case 2:return r[0]+" or "+r[1];default:return r.slice(0,-1).join(", ")+", or "+r[r.length-1]}}(e)+" but "+function(e){return e?'"'+o(e)+'"':"end of input"}(t)+" found."},e.exports={SyntaxError:r,parse:function(e,t){var o,u={},a=(t=void 0!==t?t:{}).grammarSource,i={Start:Lt},l=Lt,s="&theta",c="&list",p="getKey",f=" and ",m=" or ",d=" xor ",h=",",v="Then",S="Else",b="For(",y="While ",g="Repeat ",E="Pause",L="Lbl ",A="Goto ",R="IS>(",I="DS<(",w="Menu(",k="prgm",x="Return",T="Stop",N="DelVar ",B="GraphStyle(",M="OpenLib(",C="ExecLib(",G="Input ",D="Prompt ",U="Disp ",V="DispGraph",P="DispTable",O="Output(",F="ClrHome",H="ClrTable",$="GetCalc(",Y="Get(",j="Send(",W=/^[A-Z]/,K=/^[A-Z0-9]/,X=/^[0-9]/,q=/^[1-6]/,Q=/^[+\-]/,Z=/^[^"]/,_={type:"any"},z=bt([["A","Z"]],!1,!1),J=bt([["A","Z"],["0","9"]],!1,!1),ee=bt([["0","9"]],!1,!1),te=St(")",!1),ne=St("&theta",!1),re=St("Str",!1),oe=St("&L",!1),ue=bt([["1","6"]],!1,!1),ae=St("&list",!1),ie=St("(",!1),le=bt(["+","-"],!1,!1),se=St("&E",!1),ce=St(".",!1),pe=bt(['"'],!0,!1),fe=St('"',!1),me=St("Ans",!1),de=St("getKey",!1),he=St("{",!1),ve=St("}",!1),Se=St("&-",!1),be=St("*",!1),ye=St("/",!1),ge=St("+",!1),Ee=St("-",!1),Le=St("=",!1),Ae=St("!=",!1),Re=St(">=",!1),Ie=St(">",!1),we=St("<=",!1),ke=St("<",!1),xe=St(" and ",!1),Te=St(" or ",!1),Ne=St(" xor ",!1),Be=St(",",!1),Me=St("->",!1),Ce=St("If ",!1),Ge=St("Then",!1),De=St("Else",!1),Ue=St("For(",!1),Ve=St("While ",!1),Pe=St("Repeat ",!1),Oe=St("End",!1),Fe=St("Pause",!1),He=St("Lbl ",!1),$e=St("Goto ",!1),Ye=St("IS>(",!1),je=St("DS<(",!1),We=St("Menu(",!1),Ke=St("prgm",!1),Xe=St("Return",!1),qe=St("Stop",!1),Qe=St("DelVar ",!1),Ze=St("GraphStyle(",!1),_e=St("OpenLib(",!1),ze=St("ExecLib(",!1),Je=St("Input ",!1),et=St("Prompt ",!1),tt=St("Disp ",!1),nt=St("DispGraph",!1),rt=St("DispTable",!1),ot=St("Output(",!1),ut=St("ClrHome",!1),at=St("ClrTable",!1),it=St("GetCalc(",!1),lt=St("Get(",!1),st=St("Send(",!1),ct=0,pt=0,ft=[{line:1,column:1}],mt=0,dt=[],ht=0;if("startRule"in t){if(!(t.startRule in i))throw new Error("Can't start parsing from rule \""+t.startRule+'".');l=i[t.startRule]}function vt(){return e.substring(pt,ct)}function St(e,t){return{type:"literal",text:e,ignoreCase:t}}function bt(e,t,n){return{type:"class",parts:e,inverted:t,ignoreCase:n}}function yt(t){var n,r=ft[t];if(r)return r;for(n=t-1;!ft[n];)n--;for(r={line:(r=ft[n]).line,column:r.column};n<t;)10===e.charCodeAt(n)?(r.line++,r.column=1):r.column++,n++;return ft[t]=r,r}function gt(e,t){var n=yt(e),r=yt(t);return{source:a,start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:r.line,column:r.column}}}function Et(e){ct<mt||(ct>mt&&(mt=ct,dt=[]),dt.push(e))}function Lt(){var t;return t=function(){var t;return(t=function(){var e,t,n;return e=ct,t=ct,ht++,n=At(),ht--,n===u?t=void 0:(ct=t,t=u),t!==u&&(pt=e,t={type:Jt.EmptyStatement}),t}())===u&&(t=function(){var t,n,r,o,a,i;return t=ct,(n=_t())!==u?("->"===e.substr(ct,2)?(r="->",ct+=2):(r=u,0===ht&&Et(Me)),r!==u&&(o=Gt())!==u?(pt=t,a=n,i=o,t={type:Jt.AssignmentStatement,value:a,assignable:i}):(ct=t,t=u)):(ct=t,t=u),t}())===u&&(t=function(){var t;return(t=function(){var t,n,r,o,a,i;return t=ct,"If "===e.substr(ct,3)?(n="If ",ct+=3):(n=u,0===ht&&Et(Ce)),n!==u?((r=_t())===u&&(r=null),(o=kt())===u&&(o=null),pt=t,a=r,i=o,t={type:Jt.IfStatement,value:a,extra:i}):(ct=t,t=u),t}())===u&&(t=function(){var t,n,r,o;return t=ct,e.substr(ct,4)===v?(n=v,ct+=4):(n=u,0===ht&&Et(Ge)),n!==u?((r=kt())===u&&(r=null),pt=t,o=r,t={type:Jt.ThenStatement,extra:o}):(ct=t,t=u),t}())===u&&(t=function(){var t,n,r,o;return t=ct,e.substr(ct,4)===S?(n=S,ct+=4):(n=u,0===ht&&Et(De)),n!==u?((r=kt())===u&&(r=null),pt=t,o=r,t={type:Jt.ElseStatement,extra:o}):(ct=t,t=u),t}())===u&&(t=function(){var t,n,r,o,a,i,l,s,c,p,f,m,d,h;return t=ct,e.substr(ct,4)===b?(n=b,ct+=4):(n=u,0===ht&&Et(Ue)),n!==u?((r=Ct())===u&&(r=null),(o=zt())===u&&(o=null),(a=zt())===u&&(a=null),(i=zt())===u&&(i=null),l=function(){var e,t,n;if(e=ct,t=[],(n=zt())!==u)for(;n!==u;)t.push(n),n=zt();else t=u;return t!==u&&(pt=e,t=!0),t}(),l===u&&(l=null),xt(),(s=kt())===u&&(s=null),pt=t,c=r,p=o,f=a,m=i,d=l,h=s,t={type:Jt.ForLoop,variable:c,start:p,end:f,step:m,args:d,extra:h}):(ct=t,t=u),t}())===u&&(t=function(){var t,n,r,o,a,i;return t=ct,e.substr(ct,6)===y?(n=y,ct+=6):(n=u,0===ht&&Et(Ve)),n!==u?((r=_t())===u&&(r=null),(o=kt())===u&&(o=null),pt=t,a=r,i=o,t={type:Jt.WhileLoop,value:a,extra:i}):(ct=t,t=u),t}())===u&&(t=function(){var t,n,r,o,a,i;return t=ct,e.substr(ct,7)===g?(n=g,ct+=7):(n=u,0===ht&&Et(Pe)),n!==u?((r=_t())===u&&(r=null),(o=kt())===u&&(o=null),pt=t,a=r,i=o,t={type:Jt.RepeatLoop,value:a,extra:i}):(ct=t,t=u),t}())===u&&(t=function(){var t,n,r,o;return t=ct,"End"===e.substr(ct,3)?(n="End",ct+=3):(n=u,0===ht&&Et(Oe)),n!==u?((r=kt())===u&&(r=null),pt=t,o=r,t={type:Jt.EndStatement,extra:o}):(ct=t,t=u),t}())===u&&(t=function(){var t,n;return t=ct,e.substr(ct,5)===E?(n=E,ct+=5):(n=u,0===ht&&Et(Fe)),n!==u&&(pt=t,n={type:Jt.PauseStatement}),n}())===u&&((t=function(){var t,n,r,o;return t=ct,e.substr(ct,4)===L?(n=L,ct+=4):(n=u,0===ht&&Et(He)),n!==u&&(r=Tt())!==u?(pt=t,o=r,t={type:Jt.LabelStatement,location:o}):(ct=t,t=u),t}())===u&&((t=function(){var t,n,r,o;return t=ct,e.substr(ct,5)===A?(n=A,ct+=5):(n=u,0===ht&&Et($e)),n!==u&&(r=Tt())!==u?(pt=t,o=r,t={type:Jt.GotoStatement,location:o}):(ct=t,t=u),t}())===u&&(t=function(){var t,n,r,o,a,i;return t=ct,e.substr(ct,4)===R?(n=R,ct+=4):(n=u,0===ht&&Et(Ye)),n!==u?((r=Ct())===u&&(r=null),(o=zt())===u&&(o=null),xt(),pt=t,a=r,i=o,t={type:Jt.IncrementSkip,variable:a,end:i}):(ct=t,t=u),t}())===u&&(t=function(){var t,n,r,o,a,i;return t=ct,e.substr(ct,4)===I?(n=I,ct+=4):(n=u,0===ht&&Et(je)),n!==u?((r=Ct())===u&&(r=null),(o=zt())===u&&(o=null),xt(),pt=t,a=r,i=o,t={type:Jt.DecrementSkip,variable:a,end:i}):(ct=t,t=u),t}())===u&&(t=function(){var t,n,r,o,a,i,l,s,c;if(t=ct,e.substr(ct,5)===w?(n=w,ct+=5):(n=u,0===ht&&Et(We)),n!==u){for((r=_t())===u&&(r=null),o=[],a=ct,44===e.charCodeAt(ct)?(i=h,ct++):(i=u,0===ht&&Et(Be)),i!==u&&(l=Pt())!==u?(44===e.charCodeAt(ct)?(s=h,ct++):(s=u,0===ht&&Et(Be)),s!==u&&(c=Tt())!==u?a=i=[i,l,s,c]:(ct=a,a=u)):(ct=a,a=u);a!==u;)o.push(a),a=ct,44===e.charCodeAt(ct)?(i=h,ct++):(i=u,0===ht&&Et(Be)),i!==u&&(l=Pt())!==u?(44===e.charCodeAt(ct)?(s=h,ct++):(s=u,0===ht&&Et(Be)),s!==u&&(c=Tt())!==u?a=i=[i,l,s,c]:(ct=a,a=u)):(ct=a,a=u);a=xt(),pt=t,t=function(e,t){return en.buildMenuStatement(e,t)}(r,o)}else ct=t,t=u;return t}(),t===u&&(t=function(){var t,n,r,o;return t=ct,e.substr(ct,4)===k?(n=k,ct+=4):(n=u,0===ht&&Et(Ke)),n!==u&&(r=Nt())!==u?(pt=t,o=r,t={type:Jt.ProgramStatement,name:o}):(ct=t,t=u),t}())===u&&(t=function(){var t,n;return t=ct,e.substr(ct,6)===x?(n=x,ct+=6):(n=u,0===ht&&Et(Xe)),n!==u&&(pt=t,n={type:Jt.ReturnStatement}),n}())===u&&(t=function(){var t,n;return t=ct,e.substr(ct,4)===T?(n=T,ct+=4):(n=u,0===ht&&Et(qe)),n!==u&&(pt=t,n={type:Jt.StopStatement}),n}())===u&&(t=function(){var t,n,r,o;return t=ct,e.substr(ct,7)===N?(n=N,ct+=7):(n=u,0===ht&&Et(Qe)),n!==u?((r=Ct())===u&&(r=null),pt=t,o=r,t={type:Jt.DelVarStatement,variable:o}):(ct=t,t=u),t}())===u&&(t=function(){var t,n,r,o,a,i;return t=ct,e.substr(ct,11)===B?(n=B,ct+=11):(n=u,0===ht&&Et(Ze)),n!==u?((r=_t())===u&&(r=null),(o=zt())===u&&(o=null),xt(),pt=t,a=r,i=o,t={type:Jt.GraphStyleStatement,equation:a,style:i}):(ct=t,t=u),t}())===u&&(t=function(){var t,n,r,o;return t=ct,e.substr(ct,8)===M?(n=M,ct+=8):(n=u,0===ht&&Et(_e)),n!==u&&(r=Nt())!==u?(xt(),pt=t,o=r,t={type:Jt.OpenLibStatement,name:o}):(ct=t,t=u),t}())===u&&(t=function(){var t,n,r,o;return t=ct,e.substr(ct,8)===C?(n=C,ct+=8):(n=u,0===ht&&Et(ze)),n!==u&&(r=Nt())!==u?(xt(),pt=t,o=r,t={type:Jt.ExecLibStatement,name:o}):(ct=t,t=u),t}())))),t}(),t===u&&(t=function(){var t;return t=function(){var t,n,r,o;return t=ct,e.substr(ct,6)===G?(n=G,ct+=6):(n=u,0===ht&&Et(Je)),n!==u?(r=function(){var t,n,r;return t=ct,(n=_t())!==u?(44===e.charCodeAt(ct)?(r=h,ct++):(r=u,0===ht&&Et(Be)),r!==u?t=n:(ct=t,t=u)):(ct=t,t=u),t}(),r===u&&(r=null),(o=Ct())===u&&(o=null),pt=t,t=function(e,t){return{type:Jt.Input,text:e,variable:t}}(r,o)):(ct=t,t=u),t}(),t===u&&(t=function(){var t,n,r,o;return t=ct,e.substr(ct,7)===D?(n=D,ct+=7):(n=u,0===ht&&Et(et)),n!==u?((r=Ct())===u&&(r=null),pt=t,o=r,t={type:Jt.Prompt,variable:o}):(ct=t,t=u),t}())===u&&(t=function(){var t,n,r,o;return t=ct,e.substr(ct,5)===U?(n=U,ct+=5):(n=u,0===ht&&Et(tt)),n!==u?((r=_t())===u&&(r=null),pt=t,o=r,t={type:Jt.Display,value:o}):(ct=t,t=u),t}())===u&&(t=function(){var t,n;return t=ct,e.substr(ct,9)===V?(n=V,ct+=9):(n=u,0===ht&&Et(nt)),n!==u&&(pt=t,n={type:Jt.DispGraph}),n}())===u&&(t=function(){var t,n;return t=ct,e.substr(ct,9)===P?(n=P,ct+=9):(n=u,0===ht&&Et(rt)),n!==u&&(pt=t,n={type:Jt.DispTable}),n}())===u&&(t=function(){var t,n,r,o,a,i,l,s;return t=ct,e.substr(ct,7)===O?(n=O,ct+=7):(n=u,0===ht&&Et(ot)),n!==u?((r=_t())===u&&(r=null),(o=zt())===u&&(o=null),(a=zt())===u&&(a=null),xt(),pt=t,i=r,l=o,s=a,t={type:Jt.Output,row:i,column:l,value:s}):(ct=t,t=u),t}())===u&&(t=function(){var t,n;return t=ct,e.substr(ct,7)===F?(n=F,ct+=7):(n=u,0===ht&&Et(ut)),n!==u&&(pt=t,n={type:Jt.ClrHome}),n}())===u&&(t=function(){var t,n;return t=ct,e.substr(ct,8)===H?(n=H,ct+=8):(n=u,0===ht&&Et(at)),n!==u&&(pt=t,n={type:Jt.ClrTable}),n}())===u&&(t=function(){var t,n,r,o,a,i;return t=ct,e.substr(ct,8)===$?(n=$,ct+=8):(n=u,0===ht&&Et(it)),n!==u?((r=Ct())===u&&(r=null),(o=zt())===u&&(o=null),xt(),pt=t,a=r,i=o,t={type:Jt.GetCalc,variable:a,portflag:i}):(ct=t,t=u),t}())===u&&(t=function(){var t,n,r,o;return t=ct,e.substr(ct,4)===Y?(n=Y,ct+=4):(n=u,0===ht&&Et(lt)),n!==u?((r=Ct())===u&&(r=null),xt(),pt=t,o=r,t={type:Jt.Get,variable:o}):(ct=t,t=u),t}())===u&&(t=function(){var t,n,r,o;return t=ct,e.substr(ct,5)===j?(n=j,ct+=5):(n=u,0===ht&&Et(st)),n!==u?((r=Ct())===u&&(r=null),xt(),pt=t,o=r,t={type:Jt.Send,variable:o}):(ct=t,t=u),t}()),t}(),t===u&&(t=function(){var e,t,n;return e=ct,(t=_t())!==u&&(pt=e,n=t,t={type:Jt.ValueStatement,value:n}),t}()))),t}(),t}function At(){var t;return e.length>ct?(t=e.charAt(ct),ct++):(t=u,0===ht&&Et(_)),t}function Rt(){var t;return W.test(e.charAt(ct))?(t=e.charAt(ct),ct++):(t=u,0===ht&&Et(z)),t}function It(){var t;return K.test(e.charAt(ct))?(t=e.charAt(ct),ct++):(t=u,0===ht&&Et(J)),t}function wt(){var t;return X.test(e.charAt(ct))?(t=e.charAt(ct),ct++):(t=u,0===ht&&Et(ee)),t}function kt(){var e,t,n;if(e=ct,t=[],(n=At())!==u)for(;n!==u;)t.push(n),n=At();else t=u;return t!==u&&(pt=e,t=!0),t}function xt(){var t;return 41===e.charCodeAt(ct)?(t=")",ct++):(t=u,0===ht&&Et(te)),t===u&&(t=null),t}function Tt(){var e;return e=ct,It()!==u?(It(),pt=e,e=vt()):(ct=e,e=u),e}function Nt(){var e;return e=ct,Rt()!==u?(It(),It(),It(),It(),It(),It(),It(),pt=e,e=vt()):(ct=e,e=u),e}function Bt(){var t,n,r;return t=ct,(n=function(){var t,n;return t=ct,"Str"===e.substr(ct,3)?(n="Str",ct+=3):(n=u,0===ht&&Et(re)),n!==u&&wt()!==u?(pt=t,t=vt()):(ct=t,t=u),t}())!==u&&(pt=t,r=n,n={type:Jt.STRINGVARIABLE,name:r}),n}function Mt(){var t,n,r;return t=ct,n=function(){var t,n,r;return t=ct,"&L"===e.substr(ct,2)?(n="&L",ct+=2):(n=u,0===ht&&Et(oe)),n!==u?(q.test(e.charAt(ct))?(r=e.charAt(ct),ct++):(r=u,0===ht&&Et(ue)),r!==u?(pt=t,t="List"+r):(ct=t,t=u)):(ct=t,t=u),t}(),n!==u&&(pt=t,r=n,n={type:Jt.LISTVARIABLE,name:r,custom:!1}),(t=n)===u&&(t=ct,(n=function(){var t,n;return t=ct,e.substr(ct,5)===c?(n=c,ct+=5):(n=u,0===ht&&Et(ae)),n!==u&&Rt()!==u?(It(),It(),It(),It(),pt=t,t="List"+vt().substring(5)):(ct=t,t=u),t}())!==u&&(pt=t,n=function(e){return{type:Jt.LISTVARIABLE,name:e,custom:!0}}(n)),t=n),t}function Ct(){var t;return(t=Bt())===u&&(t=function(){var t,n,r;return t=ct,n=function(){var t,n;return(t=Rt())===u&&(t=ct,e.substr(ct,6)===s?(n=s,ct+=6):(n=u,0===ht&&Et(ne)),n!==u&&(pt=t,n="THETA"),t=n),t}(),n!==u&&(pt=t,r=n,n={type:Jt.VARIABLE,name:r}),n}())===u&&(t=Mt()),t}function Gt(){var t;return(t=function(){var t,n,r,o,a,i;return t=ct,(n=Mt())!==u?(40===e.charCodeAt(ct)?(r="(",ct++):(r=u,0===ht&&Et(ie)),r!==u&&(o=_t())!==u?(xt(),pt=t,a=n,i=o,t={type:Jt.LISTINDEX,list:a,index:i}):(ct=t,t=u)):(ct=t,t=u),t}())===u&&(t=Ct()),t}function Dt(){var t,n,r;if(t=ct,n=[],(r=wt())!==u)for(;r!==u;)n.push(r),r=wt();else n=u;return n!==u?e.substring(t,ct):n}function Ut(){var t,n,r,o;return t=ct,n=function(){var t;return"&E"===e.substr(ct,2)?(t="&E",ct+=2):(t=u,0===ht&&Et(se)),t}(),n!==u?(r=ct,o=function(){var t,n,r,o;return t=ct,n=ct,Q.test(e.charAt(ct))?(r=e.charAt(ct),ct++):(r=u,0===ht&&Et(le)),r===u&&(r=null),(o=Dt())!==u?n=r=[r,o]:(ct=n,n=u),n!==u?e.substring(t,ct):n}(),(r=o!==u?e.substring(r,ct):o)!==u?t=r:(ct=t,t=u)):(ct=t,t=u),t}function Vt(){var t;return Z.test(e.charAt(ct))?(t=e.charAt(ct),ct++):(t=u,0===ht&&Et(pe)),t}function Pt(){var t,n,r,o,a;return t=ct,34===e.charCodeAt(ct)?(n='"',ct++):(n=u,0===ht&&Et(fe)),n!==u?(r=function(){var t,n,r;for(t=ct,n=[],r=Vt();r!==u;)n.push(r),r=Vt();return e.substring(t,ct)}(),34===e.charCodeAt(ct)?(o='"',ct++):(o=u,0===ht&&Et(fe)),o===u&&(o=null),pt=t,a=r,t={type:Jt.STRING,chars:a}):(ct=t,t=u),t}function Ot(){var t;return(t=function(){var t;return(t=function(){var t,n;return t=ct,"Ans"===e.substr(ct,3)?(n="Ans",ct+=3):(n=u,0===ht&&Et(me)),n!==u&&(pt=t,n={type:Jt.ANS}),n}())===u&&(t=function(){var t,n;return t=ct,e.substr(ct,6)===p?(n=p,ct+=6):(n=u,0===ht&&Et(de)),n!==u&&(pt=t,n={type:Jt.GetKey}),n}()),t}())===u&&(t=Gt())===u&&(t=Pt()),t}function Ft(){var t;return"&-"===e.substr(ct,2)?(t="&-",ct+=2):(t=u,0===ht&&Et(Se)),t}function Ht(){var t,n,r,o,a;return t=function(){var t,n,r,o;return(t=Ot())===u&&(t=ct,40===e.charCodeAt(ct)?(n="(",ct++):(n=u,0===ht&&Et(ie)),n!==u&&(r=_t())!==u?(41===e.charCodeAt(ct)?(o=")",ct++):(o=u,0===ht&&Et(te)),o!==u?t=r:(ct=t,t=u)):(ct=t,t=u),t===u&&(t=function(){var t,n,r,o,a,i,l;if(t=ct,123===e.charCodeAt(ct)?(n="{",ct++):(n=u,0===ht&&Et(he)),n!==u)if((r=_t())!==u){for(o=[],a=zt();a!==u;)o.push(a),a=zt();125===e.charCodeAt(ct)?(a="}",ct++):(a=u,0===ht&&Et(ve)),a===u&&(a=null),pt=t,i=r,l=o,t=en.buildList(i,l)}else ct=t,t=u;else ct=t,t=u;return t}())),t}(),t===u&&(t=ct,(n=Ft())!==u&&(r=Ht())!==u?(pt=t,o=n,a=r,t={type:Jt.UNARY,operator:o,argument:a}):(ct=t,t=u)),t}function $t(){var t,n,r,o,a;return(t=Ht())===u&&(t=function(){var t,n,r,o,a,i,l,s;return t=ct,(n=Dt())!==u?(46===e.charCodeAt(ct)?(r=".",ct++):(r=u,0===ht&&Et(ce)),r!==u?((o=Dt())===u&&(o=null),(a=Ut())===u&&(a=null),pt=t,i=n,l=o,s=a,t={type:Jt.NUMBER,integer:i,fraction:l,exponent:s}):(ct=t,t=u)):(ct=t,t=u),t===u&&(t=ct,46===e.charCodeAt(ct)?(n=".",ct++):(n=u,0===ht&&Et(ce)),n!==u&&(r=Dt())!==u?((o=Ut())===u&&(o=null),pt=t,t=function(e,t){return{type:Jt.NUMBER,fraction:e,exponent:t}}(r,o)):(ct=t,t=u),t===u&&(t=ct,(n=Dt())!==u?((r=Ut())===u&&(r=null),pt=t,t=function(e,t){return{type:Jt.NUMBER,integer:e,exponent:t}}(n,r)):(ct=t,t=u))),t}())===u&&(t=ct,(n=Ft())!==u&&(r=$t())!==u?(pt=t,o=n,a=r,t={type:Jt.UNARY,operator:o,argument:a}):(ct=t,t=u)),t}function Yt(){var e,t,n,r,o,a,i,l,s;if(e=ct,(t=Ht())!==u){for(n=[],r=ct,(o=$t())!==u&&(a=Ht())!==u?r=o=[o,a]:(ct=r,r=u);r!==u;)n.push(r),r=ct,(o=$t())!==u&&(a=Ht())!==u?r=o=[o,a]:(ct=r,r=u);(r=$t())===u&&(r=null),pt=e,i=t,l=n,s=r,e=en.buildImplicitBinaryExpression(i,l,s)}else ct=e,e=u;if(e===u){if(e=ct,(t=$t())!==u){for(n=[],r=ct,(o=Ht())!==u&&(a=$t())!==u?r=o=[o,a]:(ct=r,r=u);r!==u;)n.push(r),r=ct,(o=Ht())!==u&&(a=$t())!==u?r=o=[o,a]:(ct=r,r=u);(r=Ht())===u&&(r=null),pt=e,e=function(e,t,n){return en.buildImplicitBinaryExpression(e,t,n)}(t,n,r)}else ct=e,e=u;e===u&&(e=$t())}return e}function jt(){var t;return 42===e.charCodeAt(ct)?(t="*",ct++):(t=u,0===ht&&Et(be)),t===u&&(47===e.charCodeAt(ct)?(t="/",ct++):(t=u,0===ht&&Et(ye))),t}function Wt(){var e,t,n,r,o,a,i,l;if(e=ct,(t=Yt())!==u){for(n=[],r=ct,(o=jt())!==u&&(a=Yt())!==u?r=o=[o,a]:(ct=r,r=u);r!==u;)n.push(r),r=ct,(o=jt())!==u&&(a=Yt())!==u?r=o=[o,a]:(ct=r,r=u);pt=e,i=t,l=n,e=en.buildBinaryExpression(i,l)}else ct=e,e=u;return e}function Kt(){var t;return 43===e.charCodeAt(ct)?(t="+",ct++):(t=u,0===ht&&Et(ge)),t===u&&(45===e.charCodeAt(ct)?(t="-",ct++):(t=u,0===ht&&Et(Ee))),t}function Xt(){var e,t,n,r,o,a,i,l;if(e=ct,(t=Wt())!==u){for(n=[],r=ct,(o=Kt())!==u&&(a=Wt())!==u?r=o=[o,a]:(ct=r,r=u);r!==u;)n.push(r),r=ct,(o=Kt())!==u&&(a=Wt())!==u?r=o=[o,a]:(ct=r,r=u);pt=e,i=t,l=n,e=en.buildBinaryExpression(i,l)}else ct=e,e=u;return e}function qt(){var t;return 61===e.charCodeAt(ct)?(t="=",ct++):(t=u,0===ht&&Et(Le)),t===u&&("!="===e.substr(ct,2)?(t="!=",ct+=2):(t=u,0===ht&&Et(Ae)),t===u&&(">="===e.substr(ct,2)?(t=">=",ct+=2):(t=u,0===ht&&Et(Re)),t===u&&(62===e.charCodeAt(ct)?(t=">",ct++):(t=u,0===ht&&Et(Ie)),t===u&&("<="===e.substr(ct,2)?(t="<=",ct+=2):(t=u,0===ht&&Et(we)),t===u&&(60===e.charCodeAt(ct)?(t="<",ct++):(t=u,0===ht&&Et(ke))))))),t}function Qt(){var e,t,n,r,o,a,i,l;if(e=ct,(t=Xt())!==u){for(n=[],r=ct,(o=qt())!==u&&(a=Xt())!==u?r=o=[o,a]:(ct=r,r=u);r!==u;)n.push(r),r=ct,(o=qt())!==u&&(a=Xt())!==u?r=o=[o,a]:(ct=r,r=u);pt=e,i=t,l=n,e=en.buildBinaryExpression(i,l)}else ct=e,e=u;return e}function Zt(){var t;return e.substr(ct,5)===f?(t=f,ct+=5):(t=u,0===ht&&Et(xe)),t===u&&(e.substr(ct,4)===m?(t=m,ct+=4):(t=u,0===ht&&Et(Te)),t===u&&(e.substr(ct,5)===d?(t=d,ct+=5):(t=u,0===ht&&Et(Ne)))),t}function _t(){var e,t,n,r,o,a,i,l;if(e=ct,(t=Qt())!==u){for(n=[],r=ct,(o=Zt())!==u&&(a=Qt())!==u?r=o=[o,a]:(ct=r,r=u);r!==u;)n.push(r),r=ct,(o=Zt())!==u&&(a=Qt())!==u?r=o=[o,a]:(ct=r,r=u);pt=e,i=t,l=n,e=en.buildBinaryExpression(i,l)}else ct=e,e=u;return e}function zt(){var t,n,r;return t=ct,44===e.charCodeAt(ct)?(n=h,ct++):(n=u,0===ht&&Et(Be)),n!==u&&(r=_t())!==u?t=r:(ct=t,t=u),t}const Jt=n(831),en=n(802);if((o=l())!==u&&ct===e.length)return o;throw o!==u&&ct<e.length&&Et({type:"end"}),tn=dt,nn=mt<e.length?e.charAt(mt):null,rn=mt<e.length?gt(mt,mt+1):gt(mt,mt),new r(r.buildMessage(tn,nn),tn,nn,rn);var tn,nn,rn}}},831:(e,t,n)=>{n.r(t),n.d(t,{ANS:()=>s,AssignmentStatement:()=>y,BINARY:()=>h,ClrHome:()=>K,ClrTable:()=>X,DecrementSkip:()=>B,DelVarStatement:()=>U,DispGraph:()=>Y,DispTable:()=>j,Display:()=>$,ElseStatement:()=>L,EmptyStatement:()=>S,EndStatement:()=>w,ExecLibStatement:()=>O,ForLoop:()=>A,Get:()=>Q,GetCalc:()=>q,GetKey:()=>c,GotoStatement:()=>T,GraphStyleStatement:()=>V,IfStatement:()=>g,IncrementSkip:()=>N,Input:()=>F,LIST:()=>i,LISTINDEX:()=>d,LISTVARIABLE:()=>m,LabelStatement:()=>x,MenuStatement:()=>M,NUMBER:()=>a,OpenLibStatement:()=>P,Output:()=>W,PauseStatement:()=>k,ProgramStatement:()=>C,Prompt:()=>H,RepeatLoop:()=>I,ReturnStatement:()=>G,STRING:()=>l,STRINGVARIABLE:()=>f,Send:()=>Z,StopStatement:()=>D,SyntaxError:()=>u,ThenStatement:()=>E,UNARY:()=>v,VARIABLE:()=>p,ValueStatement:()=>b,WhileLoop:()=>R,lib:()=>o,ti:()=>r});const r="ti",o="lib",u="SyntaxError",a="number",i="list",l="string",s="ans",c="GetKey",p="variable",f="stringVariable",m="listVariable",d="listIndex",h="binary",v="unary",S="empty",b="value",y="assign",g="IfStatement",E="ThenStatement",L="ElseStatement",A="ForLoop",R="WhileLoop",I="RepeatLoop",w="EndStatement",k="PauseStatement",x="LabelStatement",T="GotoStatement",N="IncrementSkip",B="DecrementSkip",M="MenuStatement",C="ProgramStatement",G="ReturnStatement",D="StopStatement",U="DelVarStatement",V="GraphStyleStatement",P="OpenLibStatement",O="ExecLibStatement",F="Input",H="Prompt",$="display",Y="DispGraph",j="DispTable",W="Output",K="ClrHome",X="ClrTable",q="GetCalc",Q="Get",Z="Send"},802:(e,t,n)=>{n.r(t),n.d(t,{buildBinaryExpression:()=>o,buildImplicitBinaryExpression:()=>u,buildList:()=>i,buildMenuStatement:()=>a});var r=n(831);function o(e,t){return t.reduce((function(e,t){return{type:r.BINARY,operator:t[0],left:e,right:t[1]}}),e)}function u(e,t,n){const o=t.flat();return null!==n&&o.push(n),o.reduce((function(e,t){return{type:r.BINARY,operator:"*",left:e,right:t}}),e)}function a(e,t){const n=t.map((function(e){return{option:e[1],location:e[3]}}));return{type:r.MenuStatement,title:e,choices:n}}function i(e,t){return{type:r.LIST,elements:[e].concat(t)}}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var u=t[r]={exports:{}};return e[r](u,u.exports,n),u.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};(()=>{n.r(r),n.d(r,{exec:()=>ve,on:()=>de,parse:()=>M,run:()=>he});var e={};n.r(e),n.d(e,{addEventListener:()=>i,postMessage:()=>a,removeEventListener:()=>l,source:()=>s});const t="looper",o=new Map,u=new Map;function a(e,t,n){return window.postMessage(e,t,n)}function i(e,t,n){return window.addEventListener(e,t,n)}function l(e,t,n){return window.removeEventListener(e,t,n)}function s(){return window}var c=n(831);function p(e,t,n=!1){return{type:e,code:t,hideSource:n}}function f(e,t=!1){return p(c.ti,e,t)}const m=f("DATA TYPE"),d=f("SYNTAX"),h=f("UNDEFINED"),v=f("LABEL"),S=f("ARGUMENT"),b=f("DIM MISMATCH"),y=f("DIVIDE BY 0"),g=f("INVALID DIM"),E=f("DOMAIN");function L(e,t=!1){return p(c.lib,e,t)}const A=L("unimplemented");function R(e=0){return{type:c.NUMBER,float:e}}const I=R(1),w=R(-1),k="done",x="faulted",T="suspend";var N=n(62),B=n.n(N);function M(e,t={}){if(void 0===e)throw new Error("Undefined source!");const n=t.sourceMap||"inline",r=e.split(/\r?\n/).map((e=>{let t;try{t=B().parse(e)}catch(e){if("SyntaxError"!==e.name)throw e;t={type:"SyntaxError"}}return"inline"===n&&(t.source=e),t}));return r}function C(e){if(e.type===c.NUMBER)return 0!==e.float;throw m}function G(e,t,n){if(t.type===c.STRINGVARIABLE){if(n.type!==c.STRING)throw m}else if(t.type===c.VARIABLE){if(n.type!==c.NUMBER)return}else if(t.type===c.LISTVARIABLE){if(n.type!==c.LIST)throw m}else{if(t.type!==c.LISTINDEX)throw L("unexpected variable type");if(n.type!==c.LIST)throw m}e.vars[t.name]=n}function D(e,t){e.ans=t}function U(e,t,n){return{type:c.BINARY,operator:t,left:e,right:n}}function V(e){let t="";return void 0!==e.integer&&null!==e.integer&&(t+=e.integer),void 0!==e.fraction&&null!==e.fraction&&(t+="."+e.fraction),void 0!==e.exponent&&null!==e.exponent&&(t+="e"+e.exponent),parseFloat(t)}function P(e,t=!1){if(t&&e.type!==c.STRING)throw m;let n="";switch(e.type){case c.NUMBER:n=e.float.toString(),n.startsWith("0.")&&(n=n.substring(1));break;case c.STRING:n=e.chars;break;case c.LIST:n="{"+e.elements.map((e=>P(e))).join(" ")+"}";break;default:throw L("unexpected value tostring")}return n}function O(e,t){const n=F[e.type];if(void 0===n)throw L("unexpected value");return n(e,t)}const F={};F[c.SyntaxError]=(e,t)=>{throw d},F[c.NUMBER]=(e,t)=>void 0!==e.float?e:{type:c.NUMBER,float:V(e)},F[c.STRING]=(e,t)=>e,F[c.LIST]=(e,t)=>!0===e.resolved?e:{type:c.LIST,elements:e.elements.map((function(e){const n=O(e,t);if(n.type!==c.NUMBER)throw m;return n})),resolved:!0},F[c.VARIABLE]=(e,t)=>{let n=t.vars[e.name];return void 0===n&&(n=t.vars[e.name]=R()),n},F[c.STRINGVARIABLE]=(e,t)=>{const n=t.vars[e.name];if(void 0===n)throw h;return n},F[c.LISTVARIABLE]=(e,t)=>{const n=t.vars[e.name];if(void 0===n)throw h;return n},F[c.LISTINDEX]=(e,t)=>{const n=O(e.list,t),r=O(e.index,t);if(r.type!==c.NUMBER)throw g;if(r.float<1||r.float>n.elements.length)throw g;return{type:c.NUMBER,float:n.elements[r.float-1].float}},F[c.ANS]=(e,t)=>t.ans,F[c.GetKey]=(e,t)=>{throw A},F[c.UNARY]=(e,t)=>{const n=O(e.argument,t),r=H[n.type];if(void 0===r)throw L("unexpected unary argument");return r(e.operator,n)},F[c.BINARY]=(e,t)=>{const n=O(e.left,t),r=O(e.right,t),o=$[n.type];if(void 0===o)throw L("unexpected binary left");return o(e.operator,n,r)};const H={};H[c.NUMBER]=(e,t)=>({type:c.NUMBER,float:j(e,t.float)}),H[c.STRING]=(e,t)=>{throw m},H[c.LIST]=(e,t)=>({type:c.LIST,elements:t.elements.map((t=>({type:c.NUMBER,float:j(e,t.float)}))),resolved:!0});const $={};function Y(e,t,n){return{type:c.LIST,elements:t.elements.map(((t,r)=>({type:c.NUMBER,float:W(e,t.float,n.float)}))),resolved:!0}}function j(e,t){if("&-"===e)return-1*t;throw L("unexpected unary operator")}function W(e,t,n){if("/"===e&&0===n)throw y;switch(e){case"+":return t+n;case"-":return t-n;case"*":return t*n;case"/":return t/n;case"=":return t===n?1:0;case"!=":return t!==n?1:0;case">=":return t>=n?1:0;case">":return t>n?1:0;case"<=":return t<=n?1:0;case"<":return t<n?1:0;case" and ":return t&&n?1:0;case" or ":return t||n?1:0;case" xor ":return!t&&n||t&&!n?1:0;default:throw L("unexpected binary operator")}}$[c.NUMBER]=(e,t,n)=>{if(n.type!==c.NUMBER){if(n.type===c.LIST)return Y(e,n,t);throw m}return{type:c.NUMBER,float:W(e,t.float,n.float)}},$[c.STRING]=(e,t,n)=>{if(n.type!==c.STRING)throw m;if(["+"].includes(e))return{type:c.STRING,chars:W(e,t.chars,n.chars)};if(["=","!="].includes(e))return{type:c.NUMBER,float:W(e,t.chars,n.chars)};throw m},$[c.LIST]=(e,t,n)=>{if(n.type!==c.LIST){if(n.type===c.NUMBER)return Y(e,t,n);throw m}if(t.elements.length!==n.elements.length)throw b;return{type:c.LIST,elements:t.elements.map(((t,r)=>({type:c.NUMBER,float:W(e,t.float,n.elements[r].float)}))),resolved:!0}};const K={};function X(e,t={},n=!0){void 0!==t.output?t.output(e,n):console.log(e)}function q(e,t={}){void 0!==t.stdin&&""!==t.stdin&&void 0===t.stdinQueue&&(t.stdinQueue=t.stdin.split("\n").reverse()),void 0===t.stdinQueue?void 0!==t.input?(setTimeout((()=>t.input.val("")),0),t.input.on("keypress",(n=>{if(13===n.keyCode){const n=t.input.val();setTimeout((()=>t.input.val("")),0),!0!==e(n)&&t.input.off("keypress")}}))):setTimeout((()=>{!0===e(prompt("Input?"))&&q(e,t)}),100):setTimeout((()=>{const n=t.stdinQueue.pop();!0===e(n)&&q(e,t)}),0)}K[c.VARIABLE]=(e,t,n)=>{t.type===c.NUMBER&&(n.vars[e.name]=t)},K[c.STRINGVARIABLE]=(e,t,n)=>{if(t.type!==c.STRING)throw m;n.vars[e.name]=t},K[c.LISTVARIABLE]=(e,t,n)=>{if(t.type!==c.LIST)throw m;n.vars[e.name]=t},K[c.LISTINDEX]=(e,t,n)=>{const r=O(e.list,n),o=O(e.index,n);if(o.type!==c.NUMBER)throw m;if(o.float<1||o.float>r.elements.length)throw g;n.vars[e.list.name].elements[o.float-1]=t};const Q={};function Z(e,t,n){if(!function(e,t){return t.name in e.vars}(e,t))throw h;G(e,t,O({type:c.BINARY,operator:"+",left:t,right:n},e))}function _(e,t,n,r){return X(e,n.io,!1),q((e=>{if(null==e||""===e)return!0;n.resume((()=>{let o;X(e,n.io),o=t.type===c.STRINGVARIABLE&&r?{type:c.STRING,chars:e}:O(function(e){if(void 0===e)throw new Error("Undefined source!");const t=e.split(/\r?\n/);if(t.Length>1)throw new Error("Too many lines for an expression");const n=t[0];let r;try{r=B().parse(n)}catch(e){if("SyntaxError"!==e.name)throw e}return void 0!==r&&r.type===c.ValueStatement?r.value:{type:"SyntaxError"}}(e),n.mem),t.type===c.VARIABLE&&o.type===c.LIST&&(t={type:c.LISTVARIABLE,name:`List${t.name}`,custom:!0}),G(n.mem,t,o)}))}),n.io),T}Q[c.EmptyStatement]=(e,t)=>{},Q[c.AssignmentStatement]=(e,t)=>{const n=O(e.value,t.mem);!function(e,t,n){const r=K[e.type];if(void 0===r)throw L("unexpected assignable type");r(e,t,n)}(e.assignable,n,t.mem),D(t.mem,n)},Q[c.ValueStatement]=(e,t)=>{D(t.mem,O(e.value,t.mem))},Q[c.SyntaxError]=(e,t)=>{throw d},Q[c.IfStatement]=(e,t)=>{if(null===e.value)throw S;t.ifResult=C(O(e.value,t.mem))},Q[c.ThenStatement]=(e,t)=>{throw d},Q[c.ElseStatement]=(e,t)=>{if(0===t.blockStack.length)throw d;if(t.lines[t.blockStack.pop()].type!==c.ThenStatement)throw d;t.blockStack.push(t.i),t.falsyStackHeight=t.blockStack.length},Q[c.ForLoop]=(e,t)=>{if(null===e.variable||null===e.start||null===e.end)throw S;G(t.mem,e.variable,O(e.start,t.mem)),t.blockStack.push(t.i),C(O(U(e.variable,"<=",e.end),t.mem))||(t.falsyStackHeight=t.blockStack.length)},Q[c.WhileLoop]=(e,t)=>{if(null===e.value)throw S;t.blockStack.push(t.i),C(O(e.value,t.mem))||(t.falsyStackHeight=t.blockStack.length)},Q[c.RepeatLoop]=(e,t)=>{if(null===e.value)throw S;t.blockStack.push(t.i)},Q[c.EndStatement]=(e,t)=>{if(0===t.blockStack.length)throw d;const n=t.blockStack.pop(),r=t.lines[n];if(r.type===c.ForLoop||r.type===c.WhileLoop||r.type===c.RepeatLoop)r.type===c.ForLoop?(Z(t.mem,r.variable,null!==r.step?r.step:I),C(O(U(r.variable,"<=",r.end),t.mem))&&(t.blockStack.push(n),t.i=n)):C(O(r.value,t.mem))&&(t.blockStack.push(n),t.i=n);else if(r.type!==c.ThenStatement&&r.type!==c.ElseStatement)throw L(`impossibleEndFrom'${r.type}`)},Q[c.PauseStatement]=(e,t)=>{throw A},Q[c.LabelStatement]=(e,t)=>{},Q[c.GotoStatement]=(e,t)=>{t.searchLabel=e.location,t.i=-1},Q[c.IncrementSkip]=(e,t)=>{if(null===e.variable||null===e.end)throw S;Z(t.mem,e.variable,I),t.incrementDecrementResult=C(O(U(e.variable,"<=",e.end),t.mem))},Q[c.DecrementSkip]=(e,t)=>{if(null===e.variable||null===e.end)throw S;Z(t.mem,e.variable,w),t.incrementDecrementResult=C(O(U(e.variable,">=",e.end),t.mem))},Q[c.MenuStatement]=(e,t)=>{if(null===e.title||0===e.choices.length||e.choices.length>7)throw S;return X(P(O(e.title,t.mem),!0),t.io),e.choices.forEach(((e,n)=>{X(`${n+1}:${P(e.option)}`,t.io)})),q((n=>{const r=function(e){if(null==e||""===e||e.length>1)return;const t=e.charCodeAt(0)-"0".charCodeAt(0);return t<0||t>9?void 0:t}(n);if(void 0===r||0===r||r>e.choices.length)return!0;t.searchLabel=e.choices[r-1].location,t.i=0,t.resume()}),t.io),T},Q[c.ProgramStatement]=(e,t)=>{throw A},Q[c.ReturnStatement]=(e,t)=>k,Q[c.StopStatement]=(e,t)=>k,Q[c.DelVarStatement]=(e,t)=>{if(null===e.variable)throw S;var n,r;n=t.mem,r=e.variable,delete n.vars[r.name]},Q[c.GraphStyleStatement]=(e,t)=>{throw A},Q[c.OpenLibStatement]=(e,t)=>{throw A},Q[c.ExecLibStatement]=(e,t)=>{throw A},Q[c.Display]=(e,t)=>{null!==e.value&&X(P(O(e.value,t.mem)),t.io)},Q[c.Input]=(e,t)=>{if(null===e.variable){if(null!==e.text)throw S;throw A}let n="?";return null!==e.text&&(n=P(O(e.text,t.mem),!0)),_(n,e.variable,t,!0)},Q[c.Prompt]=(e,t)=>{if(null===e.variable)throw S;return _(`${function(e){let t=e.name;switch(e.type){case c.VARIABLE:case c.STRINGVARIABLE:break;case c.LISTVARIABLE:t=t.substring(4),e.custom||(t=`&L${t}`);break;default:throw L("unexpected variable tostring")}return t}(e.variable)}=?`,e.variable,t,!1)},Q[c.DispGraph]=(e,t)=>{throw A},Q[c.DispTable]=(e,t)=>{throw A},Q[c.Output]=(e,t)=>{if(null===e.row||null===e.column||null===e.value)throw S;const n=O(e.row,t.mem),r=O(e.column,t.mem);if(n.type!==c.NUMBER||r.type!==c.NUMBER)throw m;if(n.float<1||n.float>t.rows||r.float<1||r.float>t.columns)throw E;X(P(O(e.value,t.mem)),t.io)},Q[c.ClrHome]=(e,t)=>{throw A},Q[c.ClrTable]=(e,t)=>{throw A},Q[c.GetCalc]=(e,t)=>{throw A},Q[c.Get]=(e,t)=>{throw A},Q[c.Send]=(e,t)=>{throw A};const z="daemon-loop",J="daemon-exception",ee={},te=[];let ne,re=!1,oe=0;var ue,ae;ue=t,ae=function(e){void 0!==ne&&(ne.removeEventListener("message",fe,!0),ne.removeEventListener("message",me,!0)),ne=e,ne.addEventListener("message",fe,!0),ne.addEventListener("message",me,!0)},u.has(ue)||(u[ue]=[]),u[ue].push(ae),o.has(ue)&&ae(o[ue]);const ie=document.createTextNode(null);function le(e){const t=new Event(e);ie.dispatchEvent(t)}function se(){!1===re&&(re=!0,le("start"),ne.postMessage(z,"*"))}function ce(e){if(console.debug(`[Task ${e}] Suspend`),!(e in ee))throw new Error(`Error suspending: task '${e}' not found`);ee[e].suspended=!0}function pe(e){console.debug(`[Task ${e}] Stop`),delete ee[e]}function fe(e){if(e.source!==ne||e.data!==z)return;e.stopPropagation();const t=performance.now(),n=Object.keys(ee);let r=0,o=0;n.forEach((e=>{const n=ee[e];let u;if(!0===n.suspended)u=0,o+=1;else if(r+=1,void 0===n.lastRun||n.runOnce)u=1;else{const e=t-n.lastRun;u=Math.floor(e/n.delay)}u>0&&(n.lastRun=t);for(let t=0;t<u;t++){let t;try{t=n.func()}catch(e){t=x,te.length<1e3&&(te.push(e),ne.postMessage(J,"*"))}if(t===k||n.runOnce||n.stopOnException&&t===x){pe(e),r-=1;break}if(t===T){ce(e),r-=1,o+=1;break}if("yield"===t)break}})),0===r?(re=!1,le(o>0?"suspend":"stop")):ne.postMessage(z,"*")}function me(e){if(e.source===ne&&e.data===J&&te.length>0)throw te.pop()}const de=ie.addEventListener.bind(ie);function he(e,t={}){let n=[];void 0!==t.source&&(n=Array.isArray(t.source)?t.source:t.source.split(/\r?\n/));let r=1;void 0!==t.frequencyMs&&(r=t.frequencyMs);let o=t.outputCallback;var u;void 0!==t.elem&&(u=t.elem,o=(e,t)=>{setTimeout((()=>{let n=u.val()+e;t&&(n+="\n"),u.val(n)}),0)});const a={mem:{vars:{},ans:R()},resume:void 0,resumeCallback:void 0,debug:!0===t.debug,sourceLines:n,searchLabel:void 0,ifResult:void 0,incrementDecrementResult:void 0,maximumLines:50,linesRun:0,blockStack:[],falsyStackHeight:void 0,falsyBlockPreviousIf:void 0,i:0,lines:e,callback:t.callback,frequencyMs:r,status:"pending",rows:8,columns:16,io:{output:o,input:t.input,stdin:t.stdin,includeErrors:void 0===t.includeErrors||!0===t.includeErrors,includeLibErrors:void 0===t.includeLibErrors||!0===t.includeLibErrors,includeLineNumbers:void 0===t.includeLineNumbers||!0===t.includeLineNumbers,includeSource:void 0===t.includeSource||!0===t.includeSource}},i=(l=()=>function(e){let t;try{e.status="running",t=function(e){if(e.debug&&console.debug({Line:e.i,searchLabel:e.searchLabel,ifResult:e.ifResult,blockStack:e.blockStack,falsyStackHeight:e.falsyStackHeight,falsyBlockPreviousIf:e.falsyBlockPreviousIf,source:e.source,mem:e.mem}),void 0!==e.resumeCallback&&(e.resumeCallback(),e.resumeCallback=void 0),e.i>=e.lines.length){if(void 0!==e.searchLabel)throw v;if(void 0!==e.ifResult||void 0!==e.incrementDecrementResult)throw d;return e.debug&&console.debug(e.mem),k}if(e.linesRun++,e.linesRun>=e.maximumLines)throw L("maxlines");const t=e.lines[e.i],n=t.type;if(void 0!==e.falsyStackHeight){const t=e.blockStack[e.blockStack.length-1],r=e.lines[t];return(n===c.EndStatement||n===c.ElseStatement&&r.type===c.ThenStatement)&&(e.blockStack.pop(),e.blockStack.length<e.falsyStackHeight&&(e.falsyStackHeight=void 0)),(n===c.ForLoop||n===c.RepeatLoop||n===c.WhileLoop||n===c.ThenStatement&&!0===e.falsyBlockPreviousIf||n===c.ElseStatement&&r.type===c.ThenStatement)&&e.blockStack.push(e.i),void(e.falsyBlockPreviousIf=n===c.IfStatement)}if(e.falsyBlockPreviousIf=void 0,void 0===e.searchLabel){if(void 0!==e.ifResult){const t=!0!==e.ifResult;if(e.ifResult=void 0,n===c.ThenStatement)return e.blockStack.push(e.i),void(t&&(e.falsyStackHeight=e.blockStack.length));if(t)return}if(void 0!==e.incrementDecrementResult){const t=!0!==e.incrementDecrementResult;if(e.incrementDecrementResult=void 0,t)return}if(!0===t.extra)throw d;if(!0===t.args)throw S;return function(e,t){const n=Q[e.type];if(void 0===n)throw L("unexpected");return n(e,t)}(t,e)}n===c.LabelStatement&&t.location===e.searchLabel&&(e.searchLabel=void 0)}(e)}catch(n){if(e.status="faulted",void 0===n.type)throw n;if(e.i<e.lines.length&&!0!==n.hideSource){let t=e.lines[e.i].source;void 0!==e.sourceLines&&(t=e.sourceLines[e.i]),n.source={index:e.i,line:t}}!function(e,t={}){if(e.type===c.ti&&!t.includeErrors||e.type===c.lib&&!t.includeLibErrors)return void console.log(e);let n="";e.type===c.ti?n+="ERR:":e.type===c.lib?n+="Error: ":n+="Unexpected: ",n+=e.code,t.includeLineNumbers&&void 0!==e.source&&void 0!==e.source.index&&(n+=` on line ${e.source.index}`),t.includeSource&&void 0!==e.source&&void 0!==e.source.line&&(n+=` :${e.source.line}`),X(n,t)}(n,e.io),t=k}return t===k?("faulted"!==e.status&&(e.status="done"),void 0!==e.callback&&setTimeout(e.callback,0)):e.i+=1,t}(a),function(e,t,n){const r=oe++;return console.debug(`[Task ${r}] Start`),ee[r]={func:e,delay:Math.max(t,.001),lastRun:void 0,runOnce:n,stopOnException:!0,suspended:!1},se(),r}(l,a.frequencyMs));var l;return a.resume=e=>{a.resumeCallback=e,function(e){if(console.debug(`[Task ${e}] Resume`),!(e in ee))throw console.debug(ee),new Error(`Error resuming: task '${e}' not found`);ee[e].suspended=!1,se()}(i)},{getStatus:()=>a.status,isActive:()=>"pending"===a.status||"running"===a.status,stop:()=>{!function(e={}){void 0!==e.input&&e.input.off("keypress")}(a.io),pe(i)}}}function ve(e,t){const n=ti.parse(e);ti.run(n,{outputCallback:t})}var Se;ie.removeEventListener.bind(ie),Se=e,o.looper=Se,u.looper.forEach((e=>e(Se)))})(),ti=r})();
//# sourceMappingURL=ti.js.map